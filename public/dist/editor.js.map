{"version":3,"sources":["webpack://live-news/./node_modules/trumbowyg/dist/trumbowyg.js","webpack://live-news/./node_modules/trumbowyg/plugins/allowtagsfrompaste/trumbowyg.allowtagsfrompaste.js","webpack://live-news/./node_modules/trumbowyg/plugins/cleanpaste/trumbowyg.cleanpaste.js","webpack://live-news/./node_modules/trumbowyg/plugins/colors/trumbowyg.colors.js","webpack://live-news/./node_modules/trumbowyg/plugins/emoji/trumbowyg.emoji.js","webpack://live-news/./node_modules/trumbowyg/plugins/history/trumbowyg.history.js","webpack://live-news/webpack/bootstrap","webpack://live-news/./src/js/lib/api.js","webpack://live-news/./src/js/lib/utils/content-type-view-provider.js","webpack://live-news/./src/js/lib/view/particle.js","webpack://live-news/./src/js/lib/utils/events.js","webpack://live-news/./src/js/lib/application.js","webpack://live-news/./src/js/lib/view/particle-editor.js","webpack://live-news/./src/js/lib/view/particle-stream-preview.js","webpack://live-news/./src/js/lib/view/content-type.js","webpack://live-news/./src/js/lib/view/icons.js","webpack://live-news/./src/js/lib/view/content-type--html.js","webpack://live-news/./src/js/lib/view/content-type--title.js","webpack://live-news/./src/js/lib/view/content-type--upload.js","webpack://live-news/./src/js/editor.js"],"names":["jQuery","trumbowyg","langs","en","viewHTML","undo","redo","formatting","p","blockquote","code","header","bold","italic","strikethrough","underline","strong","em","del","superscript","subscript","unorderedList","orderedList","insertImage","link","createLink","unlink","justifyLeft","justifyCenter","justifyRight","justifyFull","horizontalRule","removeformat","fullscreen","close","submit","reset","required","description","title","text","target","width","plugins","svgPath","hideButtonTexts","Object","defineProperty","value","lang","fixedBtnPane","fixedFullWidth","autogrow","autogrowOnEnter","imageWidthModalEdit","prefix","semantic","semanticKeepAttributes","resetCss","removeformatPasted","tabToIndent","tagsToRemove","tagsToKeep","btns","btnsDef","changeActiveDropdownIcon","inlineElementsSelector","pasteHandlers","urlProtocol","minimalLinks","defaultLinkTarget","undefined","writable","enumerable","configurable","navigator","window","document","$","CONFIRM_EVENT","CANCEL_EVENT","fn","options","params","trumbowygDataName","this","each","data","Trumbowyg","length","t","execCmd","cmd","param","forceCss","skipTrumbowyg","openModal","content","closeModal","openModalInsert","fields","callback","saveRange","range","getRangeText","restoreRange","setDisabled","toggle","destroy","empty","html","c","editorElem","$trumbowyg","doc","ownerDocument","$ta","$c","extend","svgPathOption","hasSvg","querySelector","location","href","split","scriptElements","getElementsByTagName","i","source","src","matches","match","substring","indexOf","console","warn","div","createElement","id","body","insertBefore","childNodes","ajax","async","type","contentType","dataType","crossDomain","url","beforeSend","complete","success","innerHTML","XMLSerializer","serializeToString","documentElement","h","isBlinkFunction","chrome","Intl","v8BreakIterator","class","isSupported","key","h1","h2","h3","h4","h5","h6","tag","dropdown","ico","o","defaultOptions","hasOwnProperty","imgDblClickHandler","getDefaultImgDblClickHandler","urlPrefix","setupUrlPrefix","disabled","nodeName","btnName","btnDef","addBtnDef","eventNamespace","keys","tagToButton","tagHandlers","concat","isIE","userAgent","appVersion","isMac","platform","toUpperCase","init","prototype","DEFAULT_SEMANTIC_MAP","height","initPlugins","execCommand","e","buildEditor","buildBtnPane","fixedBtnPaneEvents","buildOverlay","setTimeout","trigger","protocol","replace","$box","isTextarea","is","val","$ed","insertAfter","append","name","attr","syncCode","addClass","contenteditable","dir","_dir","tabindex","add","css","semanticCode","debounceButtonPaneStatus","ctrl","composition","on","ctrlKey","metaKey","altKey","shiftKey","String","fromCharCode","which","keyCode","compositionEndIE","clearTimeout","updateButtonPaneStatus","clearButtonPaneStatus","autogrowOnEnterDontClose","autogrowOnEnterWasFocused","autogrowEditorOnEnter","block","preventDefault","getSelection","deleteFromDocument","clipboardData","getData","selection","createRange","pasteHTML","getRangeAt","insertNode","createTextNode","d","originalEvent","pasteHandler","removeClass","oldHeight","clientHeight","totalHeight","scrollHeight","$btnPane","btnGrp","isArray","$btnGroup","btn","isSupportedBtn","buildBtn","trim","prepend","isDropdown","hasIcon","textDef","$btn","toLowerCase","mousedown","hasClass","dropdownPrefix","dropdownOptions","dropdownClass","$dropdown","def","buildSubBtn","hide","style","$overlay","appendTo","showOverlay","fadeIn","hideOverlay","fadeOut","isFixed","scrollTop","offset","top","$buttonPane","buttonPaneOuterHeight","outerHeight","position","left","zIndex","paddingTop","removeAttr","disable","toggleClass","after","show","off","destroyPlugins","remove","removeData","activeElement","blur","$body","btnOffsetLeft","syncTextarea","find","join","force","safe","contents","full","keepRange","semanticTag","blockElementsSelector","filter","nodeType","nodeValue","wrap","wrapInlinesInParagraphsFrom","$from","$finalParagraph","nextUntil","addBack","wrapAll","parent","$nextElement","nextAll","first","next","children","unwrap","oldTag","copyAttributes","newTag","$oldTag","prop","documentSelection","selectedRange","node","focusNode","cloneContents","parentNode","$a","selectNode","removeAllRanges","addRange","label","v","prependUrlPrefix","deleteContents","test","isCollapsed","alt","$img","isFullscreen","fullscreenCssClass","fullscreenPlaceholderClass","editorHeight","before","focus","e2","buildForm","formOrContent","$modal","one","action","opacity","paddingBottom","animate","prependTo","buildModalBtn","n","$modalBox","lg","fieldName","field","l","a","attributes","map","$form","valid","values","$field","addErrorOnModalField","pattern","patternError","err","spanErrorClass","$label","base64","parseInt","rangeCount","rangeStart","savedRange","selectNodeContents","setEnd","startContainer","startOffset","metaRange","start","end","charIndex","nodeStack","foundStart","stop","pop","nextCharIndex","setStart","cn","push","activeClasses","originalIconClass","tags","getTagsRecursive","$btnSvgUse","dropdownBtnName","$dropdownBtn","$dropdownBtnSvgUse","element","tagName","textAlign","tagHandler","loadedPlugins","plugin","shouldInit","allowedTags","removableTags","allowTagsFromPaste","not","get","processNodes","iterator","RegExp","cleanPaste","match2","attributeName","hex","x","toString","slice","colorToHex","rgb","search","cs","foreColor","backColor","foreColorRemove","backColorRemove","da","fr","de","nl","sk","zh_cn","zh_tw","ru","ja","tr","pt_br","ko","colorList","foreColorList","backColorList","allowCustomForeColor","allowCustomBackColor","displayAsList","buildDropdown","trumbowygColorOptions","colors","color","removeColorButtonName","removeColorBtnDef","charAt","substr","freeColorButtonName","freeColorBtnDef","foreColorBtnDef","backColorBtnDef","backgroundColor","hasAttribute","getAttribute","emojiList","emoji","emojiCode","emojiUrl","emojiHtml","customEmojiBtnName","customEmojiBtnDef","defaultEmojiBtnName","defaultEmojiBtnDef","encodedEmoji","fromCodePoint","emojiBtnDef","history","_stack","_index","_focusEl","btnBuildDefRedo","index","newState","carretToEnd","toggleButtonStates","btnBuildDefUndo","stackSize","redoState","toggleButtonState","enable","button","setStartAfter","setEndAfter","latestStateTagsList","newStateTagsList","stack","latestState","prevState","focusEl","focusElText","prevFocusEl","localName","outerHTML","textContent","b","arraysAreIdentical","__webpack_module_cache__","__webpack_require__","moduleId","exports","module","__webpack_modules__","esc","encodeURIComponent","getSanitizedParamsString","getParamsString","unix_timestamp_after","unix_timestamp_before","number_of_particles","order_direction","output","Error","getSanitizeParams","adminApi","config","routes","wp_rest_nonce","pApi","last_request_timestamp","resolveParticles","res","json","then","particles","resolveUpdateParticles","request_timestamp","fetchParticles","fetch","getParticles","method","error","fetchParticlesUpdate","resetLastRequestTimestamp","publicApi","requestWithNonce","route","headers","credentials","JSON","stringify","resolveNonce","attachmentCache","updateParticle","particle","deleteParticle","particle_id","fetchAttachment","attachment_id","Promise","resolve","attachment","uploadAttachment","form","onRightBeforeUpload","reject","formData","FormData","upload","cache","processData","contentTypeViewProvider","contentTypes","_type","cls","slug","found","log","particlePreview","onEdit","onCancelEdit","onDelete","created_timestamp","author","author_id","created","Date","$header","toLocaleDateString","toLocaleTimeString","$content","contentViews","view","preview$","$footer","setLoading","isEditing","$preview","syncContentWithViews","setEditing","setValue","$loading","$spinner","isLoading","get$","_events","listen","_fn","payload","forEach","onAddParticle","triggerAddParticle","$particle","onUpdateParticle","triggerUpdateParticle","onRemoveParticle","triggerRemoveParticle","application","isSavingParticle","fetchingParticles","dom","contentTypeProvider","$root","rootId","editor","onSubmit","onReset","onCancel","particleId","authorId","$editor","$contentViewElements","$tags","$tagList","renderTag","renderTags","$submit","setIsSaving","getContents","particle_contents","particle_content_types","getTags","getId","getAuthorId","preview","setPreviewLoading","updatePreviewStream","$reset","$cancel","addContent","_type_string_or_content_view","editor$","setContents","clearContentViews","getTagInputs$","setTags","input","includes","setParticle","getValue","toArray","isSaving","particleEditor","$previewHeader","$previewLoadingIndicator","streamParticlesViews","$el","isInPreviewStream","findIndex","getPreviewStreamParticleView","buildPreviewStreamParticleView","contentView","removeParticleById","slideUp","resetEditing","update","reverse","inStream","is_deleted","indexOfView","newView","particleStreamPreview","deleted","updateTimeout","events","ContentType","$toolbar","isDisabled","ContentType_HTML","_tmp_val","$textarea","LiveNews","ContentType_Title","ContentType_Upload","fetched_id","$input","setFetchingImages","api","setUploadingImage","$wrapper","getEditorImg$","$delete","updateDeleteButton","isFetching","setFetchingImage","getImg$","isUploading","renderImage","$editorImg","$imgWrapper","media_details","sizes","medium","source_url","replaceWith","renderImages","showDeleteImage","app"],"mappings":"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C5BnC,EAAYJ,EAAWtB,EAAQ8D,aAAa,WAE5CpC,IACI9c,EAAU4K,EAAElI,QAAQ4b,OAAOR,UAAU1V,QAAQ0U,IAAc,EAC3DhC,EAAKH,KAAK,YAAcmC,GAExBhC,EAAKH,KAAK,kBAIXG,OAzHf,CA+OG/a,S,gBChPH,SAAW8E,GACP,aAEA,IAAIgG,EAAiB,CACjBsU,UAAW,CACP,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,UACA,UACA,UACA,WACA,WACA,WACA,UACA,WACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,WACA,UACA,UACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,UACA,UACA,WACA,UACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,UACA,WACA,WACA,UACA,UACA,WACA,WACA,UACA,WACA,UACA,WACA,WACA,UACA,WACA,WACA,UACA,WACA,WACA,WACA,WACA,UACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,WACA,WACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,WACA,WACA,UACA,UACA,UACA,UACA,UACA,UACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,UACA,UACA,UACA,UACA,WACA,WACA,WACA,WACA,WACA,WACA,UACA,UACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,UACA,WACA,WACA,UACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,UACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,UACA,WACA,WACA,WACA,UACA,WACA,WACA,WACA,WACA,UACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,UACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,UACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,UACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,UACA,UACA,UACA,WACA,UACA,UACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,UACA,WACA,UACA,WACA,WACA,WACA,WACA,WACA,WACA,UACA,UACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,UACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,UACA,WACA,UACA,WACA,WACA,WACA,WACA,WACA,UACA,WACA,WACA,WACA,UACA,WACA,WACA,UACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,UACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,UACA,WACA,WACA,WACA,UACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,UACA,UACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,UACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,UACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,UACA,WACA,WACA,WACA,UACA,WACA,UACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,UACA,UACA,WACA,WACA,WACA,WACA,UACA,WACA,WACA,WACA,UACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,UACA,WACA,WACA,WACA,UACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,aAkDR,SAASf,EAAcpe,GACnB,IAAI0K,EAAW,GAoCf,OAlCA7F,EAAEQ,KAAKrF,EAAU4K,EAAElI,QAAQ0c,MAAMD,WAAW,SAAUrX,EAAGsX,GACrD,GAAIva,EAAEgM,QAAQuO,GAAQ,CAClB,IAAIC,EAAYD,EAAM,GAClBE,EAAWF,EAAM,GACjBG,EAAY,aAAeD,EAAW,UAAYD,EAAY,KAC9DG,EAAqB,SAAWH,EAAUpS,QAAQ,KAAM,IACxDwS,EAAoB,CAChBpO,SAAS,EACT9O,KAAMgd,EACNva,GAAI,WAEA,OADAhF,EAAU0F,QAAQ,cAAe4Z,GAAU,GAAO,IAC3C,IAInBtf,EAAUuL,UAAUiU,EAAoBC,GACxC/U,EAASiQ,KAAK6E,OACX,CACH,IACIE,EAAsB,SADhBN,EAAMnS,QAAQ,KAAM,IAE1B0S,EAAqB,CACjBpd,KAAM6c,EACNpa,GAAI,WACA,IAAI4a,EAAehR,OAAOiR,cAAcT,EAAMnS,QAAQ,KAAM,MAE5D,OADAjN,EAAU0F,QAAQ,aAAcka,IACzB,IAInB5f,EAAUuL,UAAUmU,EAAqBC,GACzCjV,EAASiQ,KAAK+E,OAIfhV,EAlFX7F,EAAEwC,QAAO,EAAMxC,EAAE7E,UAAW,CACxBC,MAAO,CAEHC,GAAI,CACAkf,MAAO,gBAEXlC,GAAI,CACAkC,MAAO,uBAEX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","file":"editor.js","sourcesContent":["/**\n * Trumbowyg v2.21.0 - A lightweight WYSIWYG editor\n * Trumbowyg core file\n * ------------------------\n * @link http://alex-d.github.io/Trumbowyg\n * @license MIT\n * @author Alexandre Demode (Alex-D)\n *         Twitter : @AlexandreDemode\n *         Website : alex-d.fr\n */\n\njQuery.trumbowyg = {\n    langs: {\n        en: {\n            viewHTML: 'View HTML',\n\n            undo: 'Undo',\n            redo: 'Redo',\n\n            formatting: 'Formatting',\n            p: 'Paragraph',\n            blockquote: 'Quote',\n            code: 'Code',\n            header: 'Header',\n\n            bold: 'Bold',\n            italic: 'Italic',\n            strikethrough: 'Strikethrough',\n            underline: 'Underline',\n\n            strong: 'Strong',\n            em: 'Emphasis',\n            del: 'Deleted',\n\n            superscript: 'Superscript',\n            subscript: 'Subscript',\n\n            unorderedList: 'Unordered list',\n            orderedList: 'Ordered list',\n\n            insertImage: 'Insert Image',\n            link: 'Link',\n            createLink: 'Insert link',\n            unlink: 'Remove link',\n\n            justifyLeft: 'Align Left',\n            justifyCenter: 'Align Center',\n            justifyRight: 'Align Right',\n            justifyFull: 'Align Justify',\n\n            horizontalRule: 'Insert horizontal rule',\n            removeformat: 'Remove format',\n\n            fullscreen: 'Fullscreen',\n\n            close: 'Close',\n\n            submit: 'Confirm',\n            reset: 'Cancel',\n\n            required: 'Required',\n            description: 'Description',\n            title: 'Title',\n            text: 'Text',\n            target: 'Target',\n            width: 'Width'\n        }\n    },\n\n    // Plugins\n    plugins: {},\n\n    // SVG Path globally\n    svgPath: null,\n\n    hideButtonTexts: null\n};\n\n// Makes default options read-only\nObject.defineProperty(jQuery.trumbowyg, 'defaultOptions', {\n    value: {\n        lang: 'en',\n\n        fixedBtnPane: false,\n        fixedFullWidth: false,\n        autogrow: false,\n        autogrowOnEnter: false,\n        imageWidthModalEdit: false,\n\n        prefix: 'trumbowyg-',\n\n        semantic: true,\n        semanticKeepAttributes: false,\n        resetCss: false,\n        removeformatPasted: false,\n        tabToIndent: false,\n        tagsToRemove: [],\n        tagsToKeep: ['hr', 'img', 'embed', 'iframe', 'input'],\n        btns: [\n            ['viewHTML'],\n            ['undo', 'redo'], // Only supported in Blink browsers\n            ['formatting'],\n            ['strong', 'em', 'del'],\n            ['superscript', 'subscript'],\n            ['link'],\n            ['insertImage'],\n            ['justifyLeft', 'justifyCenter', 'justifyRight', 'justifyFull'],\n            ['unorderedList', 'orderedList'],\n            ['horizontalRule'],\n            ['removeformat'],\n            ['fullscreen']\n        ],\n        // For custom button definitions\n        btnsDef: {},\n        changeActiveDropdownIcon: false,\n\n        inlineElementsSelector: 'a,abbr,acronym,b,caption,cite,code,col,dfn,dir,dt,dd,em,font,hr,i,kbd,li,q,span,strikeout,strong,sub,sup,u',\n\n        pasteHandlers: [],\n\n        // imgDblClickHandler: default is defined in constructor\n\n        plugins: {},\n        urlProtocol: false,\n        minimalLinks: false,\n        defaultLinkTarget: undefined\n    },\n    writable: false,\n    enumerable: true,\n    configurable: false\n});\n\n(function (navigator, window, document, $) {\n    'use strict';\n\n    var CONFIRM_EVENT = 'tbwconfirm',\n        CANCEL_EVENT = 'tbwcancel';\n\n    $.fn.trumbowyg = function (options, params) {\n        var trumbowygDataName = 'trumbowyg';\n        if (options === Object(options) || !options) {\n            return this.each(function () {\n                if (!$(this).data(trumbowygDataName)) {\n                    $(this).data(trumbowygDataName, new Trumbowyg(this, options));\n                }\n            });\n        }\n        if (this.length === 1) {\n            try {\n                var t = $(this).data(trumbowygDataName);\n                switch (options) {\n                    // Exec command\n                    case 'execCmd':\n                        return t.execCmd(params.cmd, params.param, params.forceCss, params.skipTrumbowyg);\n\n                    // Modal box\n                    case 'openModal':\n                        return t.openModal(params.title, params.content);\n                    case 'closeModal':\n                        return t.closeModal();\n                    case 'openModalInsert':\n                        return t.openModalInsert(params.title, params.fields, params.callback);\n\n                    // Range\n                    case 'saveRange':\n                        return t.saveRange();\n                    case 'getRange':\n                        return t.range;\n                    case 'getRangeText':\n                        return t.getRangeText();\n                    case 'restoreRange':\n                        return t.restoreRange();\n\n                    // Enable/disable\n                    case 'enable':\n                        return t.setDisabled(false);\n                    case 'disable':\n                        return t.setDisabled(true);\n\n                    // Toggle\n                    case 'toggle':\n                        return t.toggle();\n\n                    // Destroy\n                    case 'destroy':\n                        return t.destroy();\n\n                    // Empty\n                    case 'empty':\n                        return t.empty();\n\n                    // HTML\n                    case 'html':\n                        return t.html(params);\n                }\n            } catch (c) {\n            }\n        }\n\n        return false;\n    };\n\n    // @param: editorElem is the DOM element\n    var Trumbowyg = function (editorElem, options) {\n        var t = this,\n            trumbowygIconsId = 'trumbowyg-icons',\n            $trumbowyg = $.trumbowyg;\n\n        // Get the document of the element. It use to makes the plugin\n        // compatible on iframes.\n        t.doc = editorElem.ownerDocument || document;\n\n        // jQuery object of the editor\n        t.$ta = $(editorElem); // $ta : Textarea\n        t.$c = $(editorElem); // $c : creator\n\n        options = options || {};\n\n        // Localization management\n        if (options.lang != null || $trumbowyg.langs[options.lang] != null) {\n            t.lang = $.extend(true, {}, $trumbowyg.langs.en, $trumbowyg.langs[options.lang]);\n        } else {\n            t.lang = $trumbowyg.langs.en;\n        }\n\n        t.hideButtonTexts = $trumbowyg.hideButtonTexts != null ? $trumbowyg.hideButtonTexts : options.hideButtonTexts;\n\n        // SVG path\n        var svgPathOption = $trumbowyg.svgPath != null ? $trumbowyg.svgPath : options.svgPath;\n        t.hasSvg = svgPathOption !== false;\n        t.svgPath = !!t.doc.querySelector('base') ? window.location.href.split('#')[0] : '';\n        if ($('#' + trumbowygIconsId, t.doc).length === 0 && svgPathOption !== false) {\n            if (svgPathOption == null) {\n                // Hack to get svgPathOption based on trumbowyg.js path\n                var scriptElements = document.getElementsByTagName('script');\n                for (var i = 0; i < scriptElements.length; i += 1) {\n                    var source = scriptElements[i].src;\n                    var matches = source.match('trumbowyg(\\.min)?\\.js');\n                    if (matches != null) {\n                        svgPathOption = source.substring(0, source.indexOf(matches[0])) + 'ui/icons.svg';\n                    }\n                }\n                if (svgPathOption == null) {\n                    console.warn('You must define svgPath: https://goo.gl/CfTY9U'); // jshint ignore:line\n                }\n            }\n\n            var div = t.doc.createElement('div');\n            div.id = trumbowygIconsId;\n            t.doc.body.insertBefore(div, t.doc.body.childNodes[0]);\n            $.ajax({\n                async: true,\n                type: 'GET',\n                contentType: 'application/x-www-form-urlencoded; charset=UTF-8',\n                dataType: 'xml',\n                crossDomain: true,\n                url: svgPathOption,\n                data: null,\n                beforeSend: null,\n                complete: null,\n                success: function (data) {\n                    div.innerHTML = new XMLSerializer().serializeToString(data.documentElement);\n                }\n            });\n        }\n\n\n        /**\n         * When the button is associated to a empty object\n         * fn and title attributes are defined from the button key value\n         *\n         * For example\n         *      foo: {}\n         * is equivalent to :\n         *      foo: {\n         *          fn: 'foo',\n         *          title: this.lang.foo\n         *      }\n         */\n        var h = t.lang.header, // Header translation\n            isBlinkFunction = function () {\n                return (window.chrome || (window.Intl && Intl.v8BreakIterator)) && 'CSS' in window;\n            };\n        t.btnsDef = {\n            viewHTML: {\n                fn: 'toggle',\n                class: 'trumbowyg-not-disable',\n            },\n\n            undo: {\n                isSupported: isBlinkFunction,\n                key: 'Z'\n            },\n            redo: {\n                isSupported: isBlinkFunction,\n                key: 'Y'\n            },\n\n            p: {\n                fn: 'formatBlock'\n            },\n            blockquote: {\n                fn: 'formatBlock'\n            },\n            h1: {\n                fn: 'formatBlock',\n                title: h + ' 1'\n            },\n            h2: {\n                fn: 'formatBlock',\n                title: h + ' 2'\n            },\n            h3: {\n                fn: 'formatBlock',\n                title: h + ' 3'\n            },\n            h4: {\n                fn: 'formatBlock',\n                title: h + ' 4'\n            },\n            h5: {\n                fn: 'formatBlock',\n                title: h + ' 5'\n            },\n            h6: {\n                fn: 'formatBlock',\n                title: h + ' 6'\n            },\n            subscript: {\n                tag: 'sub'\n            },\n            superscript: {\n                tag: 'sup'\n            },\n\n            bold: {\n                key: 'B',\n                tag: 'b'\n            },\n            italic: {\n                key: 'I',\n                tag: 'i'\n            },\n            underline: {\n                tag: 'u'\n            },\n            strikethrough: {\n                tag: 'strike'\n            },\n\n            strong: {\n                fn: 'bold',\n                key: 'B'\n            },\n            em: {\n                fn: 'italic',\n                key: 'I'\n            },\n            del: {\n                fn: 'strikethrough'\n            },\n\n            createLink: {\n                key: 'K',\n                tag: 'a'\n            },\n            unlink: {},\n\n            insertImage: {},\n\n            justifyLeft: {\n                tag: 'left',\n                forceCss: true\n            },\n            justifyCenter: {\n                tag: 'center',\n                forceCss: true\n            },\n            justifyRight: {\n                tag: 'right',\n                forceCss: true\n            },\n            justifyFull: {\n                tag: 'justify',\n                forceCss: true\n            },\n\n            unorderedList: {\n                fn: 'insertUnorderedList',\n                tag: 'ul'\n            },\n            orderedList: {\n                fn: 'insertOrderedList',\n                tag: 'ol'\n            },\n\n            horizontalRule: {\n                fn: 'insertHorizontalRule'\n            },\n\n            removeformat: {},\n\n            fullscreen: {\n                class: 'trumbowyg-not-disable'\n            },\n            close: {\n                fn: 'destroy',\n                class: 'trumbowyg-not-disable'\n            },\n\n            // Dropdowns\n            formatting: {\n                dropdown: ['p', 'blockquote', 'h1', 'h2', 'h3', 'h4'],\n                ico: 'p'\n            },\n            link: {\n                dropdown: ['createLink', 'unlink']\n            }\n        };\n\n        // Defaults Options\n        t.o = $.extend(true, {}, $trumbowyg.defaultOptions, options);\n        if (!t.o.hasOwnProperty('imgDblClickHandler')) {\n            t.o.imgDblClickHandler = t.getDefaultImgDblClickHandler();\n        }\n\n        t.urlPrefix = t.setupUrlPrefix();\n\n        t.disabled = t.o.disabled || (editorElem.nodeName === 'TEXTAREA' && editorElem.disabled);\n\n        if (options.btns) {\n            t.o.btns = options.btns;\n        } else if (!t.o.semantic) {\n            t.o.btns[3] = ['bold', 'italic', 'underline', 'strikethrough'];\n        }\n\n        $.each(t.o.btnsDef, function (btnName, btnDef) {\n            t.addBtnDef(btnName, btnDef);\n        });\n\n        // put this here in the event it would be merged in with options\n        t.eventNamespace = 'trumbowyg-event';\n\n        // Keyboard shortcuts are load in this array\n        t.keys = [];\n\n        // Tag to button dynamically hydrated\n        t.tagToButton = {};\n        t.tagHandlers = [];\n\n        // Admit multiple paste handlers\n        t.pasteHandlers = [].concat(t.o.pasteHandlers);\n\n        // Check if browser is IE\n        t.isIE = navigator.userAgent.indexOf('MSIE') !== -1 || navigator.appVersion.indexOf('Trident/') !== -1;\n\n        // Check if we are on macOs\n        t.isMac = navigator.platform.toUpperCase().indexOf('MAC') !== -1;\n\n        t.init();\n    };\n\n    Trumbowyg.prototype = {\n        DEFAULT_SEMANTIC_MAP: {\n            'b': 'strong',\n            'i': 'em',\n            's': 'del',\n            'strike': 'del',\n            'div': 'p'\n        },\n\n        init: function () {\n            var t = this;\n            t.height = t.$ta.height();\n\n            t.initPlugins();\n\n            try {\n                // Disable image resize, try-catch for old IE\n                t.doc.execCommand('enableObjectResizing', false, false);\n                t.doc.execCommand('defaultParagraphSeparator', false, 'p');\n            } catch (e) {\n            }\n\n            t.buildEditor();\n            t.buildBtnPane();\n\n            t.fixedBtnPaneEvents();\n\n            t.buildOverlay();\n\n            setTimeout(function () {\n                if (t.disabled) {\n                    t.setDisabled(true);\n                }\n                t.$c.trigger('tbwinit');\n            });\n        },\n\n        addBtnDef: function (btnName, btnDef) {\n            this.btnsDef[btnName] = $.extend(btnDef, this.btnsDef[btnName] || {});\n        },\n\n        setupUrlPrefix: function () {\n            var protocol = this.o.urlProtocol;\n            if (!protocol) {\n                return;\n            }\n\n            if (typeof(protocol) !== 'string') {\n                return 'https://';\n            }\n            return protocol.replace('://', '') + '://';\n        },\n\n        buildEditor: function () {\n            var t = this,\n                prefix = t.o.prefix,\n                html = '';\n\n            t.$box = $('<div/>', {\n                class: prefix + 'box ' + prefix + 'editor-visible ' + prefix + t.o.lang + ' trumbowyg'\n            });\n\n            // $ta = Textarea\n            // $ed = Editor\n            t.isTextarea = t.$ta.is('textarea');\n            if (t.isTextarea) {\n                html = t.$ta.val();\n                t.$ed = $('<div/>');\n                t.$box\n                    .insertAfter(t.$ta)\n                    .append(t.$ed, t.$ta);\n            } else {\n                t.$ed = t.$ta;\n                html = t.$ed.html();\n\n                t.$ta = $('<textarea/>', {\n                    name: t.$ta.attr('id'),\n                    height: t.height\n                }).val(html);\n\n                t.$box\n                    .insertAfter(t.$ed)\n                    .append(t.$ta, t.$ed);\n                t.syncCode();\n            }\n\n            t.$ta\n                .addClass(prefix + 'textarea')\n                .attr('tabindex', -1)\n            ;\n\n            t.$ed\n                .addClass(prefix + 'editor')\n                .attr({\n                    contenteditable: true,\n                    dir: t.lang._dir || 'ltr'\n                })\n                .html(html)\n            ;\n\n            if (t.o.tabindex) {\n                t.$ed.attr('tabindex', t.o.tabindex);\n            }\n\n            if (t.$c.is('[placeholder]')) {\n                t.$ed.attr('placeholder', t.$c.attr('placeholder'));\n            }\n\n            if (t.$c.is('[spellcheck]')) {\n                t.$ed.attr('spellcheck', t.$c.attr('spellcheck'));\n            }\n\n            if (t.o.resetCss) {\n                t.$ed.addClass(prefix + 'reset-css');\n            }\n\n            if (!t.o.autogrow) {\n                t.$ta.add(t.$ed).css({\n                    height: t.height\n                });\n            }\n\n            t.semanticCode();\n\n            if (t.o.autogrowOnEnter) {\n                t.$ed.addClass(prefix + 'autogrow-on-enter');\n            }\n\n            var ctrl = false,\n                composition = false,\n                debounceButtonPaneStatus;\n\n            t.$ed\n                .on('dblclick', 'img', t.o.imgDblClickHandler)\n                .on('keydown', function (e) {\n                    if ((e.ctrlKey || e.metaKey) && !e.altKey) {\n                        ctrl = true;\n                        var key = t.keys[String.fromCharCode(e.which).toUpperCase()];\n\n                        try {\n                            t.execCmd(key.fn, key.param);\n                            return false;\n                        } catch (c) {}\n                    } else {\n                        if (t.o.tabToIndent && e.key === 'Tab') {\n                            try {\n                                if (e.shiftKey) {\n                                    t.execCmd('outdent', true, null);\n                                } else {\n                                    t.execCmd('indent', true, null);\n                                }\n                                return false;\n                            } catch (c) {}\n                        }\n                    }\n                })\n                .on('compositionstart compositionupdate', function () {\n                    composition = true;\n                })\n                .on('keyup compositionend', function (e) {\n                    if (e.type === 'compositionend') {\n                        composition = false;\n                    } else if (composition) {\n                        return;\n                    }\n\n                    var keyCode = e.which;\n\n                    if (keyCode >= 37 && keyCode <= 40) {\n                        return;\n                    }\n\n                    if ((e.ctrlKey || e.metaKey) && (keyCode === 89 || keyCode === 90)) {\n                        t.semanticCode(false, true);\n                        t.$c.trigger('tbwchange');\n                    } else if (!ctrl && keyCode !== 17) {\n                        var compositionEndIE = t.isIE ? e.type === 'compositionend' : true;\n                        t.semanticCode(false, compositionEndIE && keyCode === 13);\n                        t.$c.trigger('tbwchange');\n                    } else if (typeof e.which === 'undefined') {\n                        t.semanticCode(false, false, true);\n                    }\n\n                    setTimeout(function () {\n                        ctrl = false;\n                    }, 50);\n                })\n                .on('mouseup keydown keyup', function (e) {\n                    if ((!e.ctrlKey && !e.metaKey) || e.altKey) {\n                        setTimeout(function () { // \"hold on\" to the ctrl key for 50ms\n                            ctrl = false;\n                        }, 50);\n                    }\n                    clearTimeout(debounceButtonPaneStatus);\n                    debounceButtonPaneStatus = setTimeout(function () {\n                        t.updateButtonPaneStatus();\n                    }, 50);\n                })\n                .on('focus blur', function (e) {\n                    if (e.type === 'blur') {\n                        t.clearButtonPaneStatus();\n                    }\n                    t.$c.trigger('tbw' + e.type);\n                    if (t.o.autogrowOnEnter) {\n                        if (t.autogrowOnEnterDontClose) {\n                            return;\n                        }\n                        if (e.type === 'focus') {\n                            t.autogrowOnEnterWasFocused = true;\n                            t.autogrowEditorOnEnter();\n                        }\n                        else if (!t.o.autogrow) {\n                            t.$ed.css({height: t.$ed.css('min-height')});\n                            t.$c.trigger('tbwresize');\n                        }\n                    }\n                })\n                .on('keyup focus', function () {\n                    if (!t.$ta.val().match(/<.*>/)) {\n                        setTimeout(function () {\n                            var block = t.isIE ? '<p>' : 'p';\n                            t.doc.execCommand('formatBlock', false, block);\n                            t.syncCode();\n                        }, 0);\n                    }\n                })\n                .on('cut drop', function () {\n                    setTimeout(function () {\n                        t.semanticCode(false, true);\n                        t.$c.trigger('tbwchange');\n                    }, 0);\n                })\n                .on('paste', function (e) {\n                    if (t.o.removeformatPasted) {\n                        e.preventDefault();\n\n                        if (window.getSelection && window.getSelection().deleteFromDocument) {\n                            window.getSelection().deleteFromDocument();\n                        }\n\n                        try {\n                            // IE\n                            var text = window.clipboardData.getData('Text');\n\n                            try {\n                                // <= IE10\n                                t.doc.selection.createRange().pasteHTML(text);\n                            } catch (c) {\n                                // IE 11\n                                t.doc.getSelection().getRangeAt(0).insertNode(t.doc.createTextNode(text));\n                            }\n                            t.$c.trigger('tbwchange', e);\n                        } catch (d) {\n                            // Not IE\n                            t.execCmd('insertText', (e.originalEvent || e).clipboardData.getData('text/plain'));\n                        }\n                    }\n\n                    // Call pasteHandlers\n                    $.each(t.pasteHandlers, function (i, pasteHandler) {\n                        pasteHandler(e);\n                    });\n\n                    setTimeout(function () {\n                        t.semanticCode(false, true);\n                        t.$c.trigger('tbwpaste', e);\n                        t.$c.trigger('tbwchange');\n                    }, 0);\n                });\n\n            t.$ta\n                .on('keyup', function () {\n                    t.$c.trigger('tbwchange');\n                })\n                .on('paste', function () {\n                    setTimeout(function () {\n                        t.$c.trigger('tbwchange');\n                    }, 0);\n                });\n\n            $(t.doc.body).on('keydown.' + t.eventNamespace, function (e) {\n                if (e.which === 27 && $('.' + prefix + 'modal-box').length >= 1) {\n                    t.closeModal();\n                    return false;\n                }\n            });\n        },\n\n        //autogrow when entering logic\n        autogrowEditorOnEnter: function () {\n            var t = this;\n            t.$ed.removeClass('autogrow-on-enter');\n            var oldHeight = t.$ed[0].clientHeight;\n            t.$ed.height('auto');\n            var totalHeight = t.$ed[0].scrollHeight;\n            t.$ed.addClass('autogrow-on-enter');\n            if (oldHeight !== totalHeight) {\n                t.$ed.height(oldHeight);\n                setTimeout(function () {\n                    t.$ed.css({height: totalHeight});\n                    t.$c.trigger('tbwresize');\n                }, 0);\n            }\n        },\n\n\n        // Build button pane, use o.btns option\n        buildBtnPane: function () {\n            var t = this,\n                prefix = t.o.prefix;\n\n            var $btnPane = t.$btnPane = $('<div/>', {\n                class: prefix + 'button-pane'\n            });\n\n            $.each(t.o.btns, function (i, btnGrp) {\n                if (!$.isArray(btnGrp)) {\n                    btnGrp = [btnGrp];\n                }\n\n                var $btnGroup = $('<div/>', {\n                    class: prefix + 'button-group ' + ((btnGrp.indexOf('fullscreen') >= 0) ? prefix + 'right' : '')\n                });\n                $.each(btnGrp, function (i, btn) {\n                    try { // Prevent buildBtn error\n                        if (t.isSupportedBtn(btn)) { // It's a supported button\n                            $btnGroup.append(t.buildBtn(btn));\n                        }\n                    } catch (c) {\n                    }\n                });\n\n                if ($btnGroup.html().trim().length > 0) {\n                    $btnPane.append($btnGroup);\n                }\n            });\n\n            t.$box.prepend($btnPane);\n        },\n\n\n        // Build a button and his action\n        buildBtn: function (btnName) { // btnName is name of the button\n            var t = this,\n                prefix = t.o.prefix,\n                btn = t.btnsDef[btnName],\n                isDropdown = btn.dropdown,\n                hasIcon = btn.hasIcon != null ? btn.hasIcon : true,\n                textDef = t.lang[btnName] || btnName,\n\n                $btn = $('<button/>', {\n                    type: 'button',\n                    class: prefix + btnName + '-button ' + (btn.class || '') + (!hasIcon ? ' ' + prefix + 'textual-button' : ''),\n                    html: t.hasSvg && hasIcon ?\n                        '<svg><use xlink:href=\"' + t.svgPath + '#' + prefix + (btn.ico || btnName).replace(/([A-Z]+)/g, '-$1').toLowerCase() + '\"/></svg>' :\n                        t.hideButtonTexts ? '' : (btn.text || btn.title || t.lang[btnName] || btnName),\n                    title: (btn.title || btn.text || textDef) + (btn.key ? ' (' + (t.isMac ? 'Cmd' : 'Ctrl') + ' + ' + btn.key + ')' : ''),\n                    tabindex: -1,\n                    mousedown: function () {\n                        if (!isDropdown || $('.' + btnName + '-' + prefix + 'dropdown', t.$box).is(':hidden')) {\n                            $('body', t.doc).trigger('mousedown');\n                        }\n\n                        if ((t.$btnPane.hasClass(prefix + 'disable') || t.$box.hasClass(prefix + 'disabled')) &&\n                            !$(this).hasClass(prefix + 'active') &&\n                            !$(this).hasClass(prefix + 'not-disable')) {\n                            return false;\n                        }\n\n                        t.execCmd((isDropdown ? 'dropdown' : false) || btn.fn || btnName, btn.param || btnName, btn.forceCss);\n\n                        return false;\n                    }\n                });\n\n            if (isDropdown) {\n                $btn.addClass(prefix + 'open-dropdown');\n                var dropdownPrefix = prefix + 'dropdown',\n                    dropdownOptions = { // the dropdown\n                        class: dropdownPrefix + '-' + btnName + ' ' + dropdownPrefix + ' ' + prefix + 'fixed-top ' + (btn.dropdownClass || '')\n                    };\n                dropdownOptions['data-' + dropdownPrefix] = btnName;\n                var $dropdown = $('<div/>', dropdownOptions);\n                $.each(isDropdown, function (i, def) {\n                    if (t.btnsDef[def] && t.isSupportedBtn(def)) {\n                        $dropdown.append(t.buildSubBtn(def));\n                    }\n                });\n                t.$box.append($dropdown.hide());\n            } else if (btn.key) {\n                t.keys[btn.key] = {\n                    fn: btn.fn || btnName,\n                    param: btn.param || btnName\n                };\n            }\n\n            if (!isDropdown) {\n                t.tagToButton[(btn.tag || btnName).toLowerCase()] = btnName;\n            }\n\n            return $btn;\n        },\n        // Build a button for dropdown menu\n        // @param n : name of the subbutton\n        buildSubBtn: function (btnName) {\n            var t = this,\n                prefix = t.o.prefix,\n                btn = t.btnsDef[btnName],\n                hasIcon = btn.hasIcon != null ? btn.hasIcon : true;\n\n            if (btn.key) {\n                t.keys[btn.key] = {\n                    fn: btn.fn || btnName,\n                    param: btn.param || btnName\n                };\n            }\n\n            t.tagToButton[(btn.tag || btnName).toLowerCase()] = btnName;\n\n            return $('<button/>', {\n                type: 'button',\n                class: prefix + btnName + '-dropdown-button ' + (btn.class || '') + (btn.ico ? ' ' + prefix + btn.ico + '-button' : ''),\n                html: t.hasSvg && hasIcon ?\n                  '<svg><use xlink:href=\"' + t.svgPath + '#' + prefix + (btn.ico || btnName).replace(/([A-Z]+)/g, '-$1').toLowerCase() + '\"/></svg>' + (btn.text || btn.title || t.lang[btnName] || btnName) :\n                  (btn.text || btn.title || t.lang[btnName] || btnName),\n                title: (btn.key ? '(' + (t.isMac ? 'Cmd' : 'Ctrl') + ' + ' + btn.key + ')' : null),\n                style: btn.style || null,\n                mousedown: function () {\n                    $('body', t.doc).trigger('mousedown');\n\n                    t.execCmd(btn.fn || btnName, btn.param || btnName, btn.forceCss);\n\n                    return false;\n                }\n            });\n        },\n        // Check if button is supported\n        isSupportedBtn: function (btnName) {\n            try {\n                return this.btnsDef[btnName].isSupported();\n            } catch (e) {\n            }\n            return true;\n        },\n\n        // Build overlay for modal box\n        buildOverlay: function () {\n            var t = this;\n            t.$overlay = $('<div/>', {\n                class: t.o.prefix + 'overlay'\n            }).appendTo(t.$box);\n            return t.$overlay;\n        },\n        showOverlay: function () {\n            var t = this;\n            $(window).trigger('scroll');\n            t.$overlay.fadeIn(200);\n            t.$box.addClass(t.o.prefix + 'box-blur');\n        },\n        hideOverlay: function () {\n            var t = this;\n            t.$overlay.fadeOut(50);\n            t.$box.removeClass(t.o.prefix + 'box-blur');\n        },\n\n        // Management of fixed button pane\n        fixedBtnPaneEvents: function () {\n            var t = this,\n                fixedFullWidth = t.o.fixedFullWidth,\n                $box = t.$box;\n\n            if (!t.o.fixedBtnPane) {\n                return;\n            }\n\n            t.isFixed = false;\n\n            $(window)\n                .on('scroll.' + t.eventNamespace + ' resize.' + t.eventNamespace, function () {\n                    if (!$box) {\n                        return;\n                    }\n\n                    t.syncCode();\n\n                    var scrollTop = $(window).scrollTop(),\n                        offset = $box.offset().top + 1,\n                        $buttonPane = t.$btnPane,\n                        buttonPaneOuterHeight = $buttonPane.outerHeight() - 2;\n\n                    if ((scrollTop - offset > 0) && ((scrollTop - offset - t.height) < 0)) {\n                        if (!t.isFixed) {\n                            t.isFixed = true;\n                            $buttonPane.css({\n                                position: 'fixed',\n                                top: 0,\n                                left: fixedFullWidth ? 0 : 'auto',\n                                zIndex: 7\n                            });\n                            t.$box.css({paddingTop: $buttonPane.height()});\n                        }\n                        $buttonPane.css({\n                            width: fixedFullWidth ? '100%' : (($box.width() - 1))\n                        });\n\n                        $('.' + t.o.prefix + 'fixed-top', $box).css({\n                            position: fixedFullWidth ? 'fixed' : 'absolute',\n                            top: fixedFullWidth ? buttonPaneOuterHeight : buttonPaneOuterHeight + (scrollTop - offset),\n                            zIndex: 15\n                        });\n                    } else if (t.isFixed) {\n                        t.isFixed = false;\n                        $buttonPane.removeAttr('style');\n                        t.$box.css({paddingTop: 0});\n                        $('.' + t.o.prefix + 'fixed-top', $box).css({\n                            position: 'absolute',\n                            top: buttonPaneOuterHeight\n                        });\n                    }\n                });\n        },\n\n        // Disable editor\n        setDisabled: function (disable) {\n            var t = this,\n                prefix = t.o.prefix;\n\n            t.disabled = disable;\n\n            if (disable) {\n                t.$ta.attr('disabled', true);\n            } else {\n                t.$ta.removeAttr('disabled');\n            }\n            t.$box.toggleClass(prefix + 'disabled', disable);\n            t.$ed.attr('contenteditable', !disable);\n        },\n\n        // Destroy the editor\n        destroy: function () {\n            var t = this,\n                prefix = t.o.prefix;\n\n            if (t.isTextarea) {\n                t.$box.after(\n                    t.$ta\n                        .css({height: ''})\n                        .val(t.html())\n                        .removeClass(prefix + 'textarea')\n                        .show()\n                );\n            } else {\n                t.$box.after(\n                    t.$ed\n                        .css({height: ''})\n                        .removeClass(prefix + 'editor')\n                        .removeAttr('contenteditable')\n                        .removeAttr('dir')\n                        .html(t.html())\n                        .show()\n                );\n            }\n\n            t.$ed.off('dblclick', 'img');\n\n            t.destroyPlugins();\n\n            t.$box.remove();\n            t.$c.removeData('trumbowyg');\n            $('body').removeClass(prefix + 'body-fullscreen');\n            t.$c.trigger('tbwclose');\n            $(window).off('scroll.' + t.eventNamespace + ' resize.' + t.eventNamespace);\n            $(t.doc.body).off('keydown.' + t.eventNamespace);\n        },\n\n\n        // Empty the editor\n        empty: function () {\n            this.$ta.val('');\n            this.syncCode(true);\n        },\n\n\n        // Function call when click on viewHTML button\n        toggle: function () {\n            var t = this,\n                prefix = t.o.prefix;\n\n            if (t.o.autogrowOnEnter) {\n                t.autogrowOnEnterDontClose = !t.$box.hasClass(prefix + 'editor-hidden');\n            }\n\n            t.semanticCode(false, true);\n            t.$c.trigger('tbwchange');\n\n            setTimeout(function () {\n                t.doc.activeElement.blur();\n                t.$box.toggleClass(prefix + 'editor-hidden ' + prefix + 'editor-visible');\n                t.$btnPane.toggleClass(prefix + 'disable');\n                $('.' + prefix + 'viewHTML-button', t.$btnPane).toggleClass(prefix + 'active');\n                if (t.$box.hasClass(prefix + 'editor-visible')) {\n                    t.$ta.attr('tabindex', -1);\n                } else {\n                    t.$ta.removeAttr('tabindex');\n                }\n\n                if (t.o.autogrowOnEnter && !t.autogrowOnEnterDontClose) {\n                    t.autogrowEditorOnEnter();\n                }\n            }, 0);\n        },\n\n        // Open dropdown when click on a button which open that\n        dropdown: function (name) {\n            var t = this,\n                $body = $('body', t.doc),\n                prefix = t.o.prefix,\n                $dropdown = $('[data-' + prefix + 'dropdown=' + name + ']', t.$box),\n                $btn = $('.' + prefix + name + '-button', t.$btnPane),\n                show = $dropdown.is(':hidden');\n\n            $body.trigger('mousedown');\n\n            if (show) {\n                var btnOffsetLeft = $btn.offset().left;\n                $btn.addClass(prefix + 'active');\n\n                $dropdown.css({\n                    position: 'absolute',\n                    top: $btn.offset().top - t.$btnPane.offset().top + $btn.outerHeight(),\n                    left: (t.o.fixedFullWidth && t.isFixed) ? btnOffsetLeft : (btnOffsetLeft - t.$btnPane.offset().left)\n                }).show();\n\n                $(window).trigger('scroll');\n\n                $body.on('mousedown.' + t.eventNamespace, function (e) {\n                    if (!$dropdown.is(e.target)) {\n                        $('.' + prefix + 'dropdown', t.$box).hide();\n                        $('.' + prefix + 'active', t.$btnPane).removeClass(prefix + 'active');\n                        $body.off('mousedown.' + t.eventNamespace);\n                    }\n                });\n            }\n        },\n\n\n        // HTML Code management\n        html: function (html) {\n            var t = this;\n\n            if (html != null) {\n                t.$ta.val(html);\n                t.syncCode(true);\n                t.$c.trigger('tbwchange');\n                return t;\n            }\n\n            return t.$ta.val();\n        },\n        syncTextarea: function () {\n            var t = this;\n            t.$ta.val(t.$ed.text().trim().length > 0 || t.$ed.find(t.o.tagsToKeep.join(',')).length > 0 ? t.$ed.html() : '');\n        },\n        syncCode: function (force) {\n            var t = this;\n            if (!force && t.$ed.is(':visible')) {\n                t.syncTextarea();\n            } else {\n                // wrap the content in a div it's easier to get the inner html\n                var html = $('<div>').html(t.$ta.val());\n                // scrub the html before loading into the doc\n                var safe = $('<div>').append(html);\n                $(t.o.tagsToRemove.join(','), safe).remove();\n                t.$ed.html(safe.contents().html());\n            }\n\n            if (t.o.autogrow) {\n                t.height = t.$ed.height();\n                if (t.height !== t.$ta.css('height')) {\n                    t.$ta.css({height: t.height});\n                    t.$c.trigger('tbwresize');\n                }\n            }\n            if (t.o.autogrowOnEnter) {\n                t.$ed.height('auto');\n                var totalHeight = t.autogrowOnEnterWasFocused ? t.$ed[0].scrollHeight : t.$ed.css('min-height');\n                if (totalHeight !== t.$ta.css('height')) {\n                    t.$ed.css({height: totalHeight});\n                    t.$c.trigger('tbwresize');\n                }\n            }\n        },\n\n        // Analyse and update to semantic code\n        // @param force : force to sync code from textarea\n        // @param full  : wrap text nodes in <p>\n        // @param keepRange  : leave selection range as it is\n        semanticCode: function (force, full, keepRange) {\n            var t = this;\n            t.saveRange();\n            t.syncCode(force);\n\n            if (t.o.semantic) {\n                t.semanticTag('b', t.o.semanticKeepAttributes);\n                t.semanticTag('i', t.o.semanticKeepAttributes);\n                t.semanticTag('s', t.o.semanticKeepAttributes);\n                t.semanticTag('strike', t.o.semanticKeepAttributes);\n\n                if (full) {\n                    var inlineElementsSelector = t.o.inlineElementsSelector,\n                        blockElementsSelector = ':not(' + inlineElementsSelector + ')';\n\n                    // Wrap text nodes in span for easier processing\n                    t.$ed.contents().filter(function () {\n                        return this.nodeType === 3 && this.nodeValue.trim().length > 0;\n                    }).wrap('<span data-tbw/>');\n\n                    // Wrap groups of inline elements in paragraphs (recursive)\n                    var wrapInlinesInParagraphsFrom = function ($from) {\n                        if ($from.length !== 0) {\n                            var $finalParagraph = $from.nextUntil(blockElementsSelector).addBack().wrapAll('<p/>').parent(),\n                                $nextElement = $finalParagraph.nextAll(inlineElementsSelector).first();\n                            $finalParagraph.next('br').remove();\n                            wrapInlinesInParagraphsFrom($nextElement);\n                        }\n                    };\n                    wrapInlinesInParagraphsFrom(t.$ed.children(inlineElementsSelector).first());\n\n                    t.semanticTag('div', true);\n\n                    // Get rid of temporary span's\n                    $('[data-tbw]', t.$ed).contents().unwrap();\n\n                    // Remove empty <p>\n                    t.$ed.find('p:empty').remove();\n                }\n\n                if (!keepRange) {\n                    t.restoreRange();\n                }\n\n                t.syncTextarea();\n            }\n        },\n\n        semanticTag: function (oldTag, copyAttributes) {\n            var newTag;\n\n            if (this.o.semantic != null && typeof this.o.semantic === 'object' && this.o.semantic.hasOwnProperty(oldTag)) {\n                newTag = this.o.semantic[oldTag];\n            } else if (this.o.semantic === true && this.DEFAULT_SEMANTIC_MAP.hasOwnProperty(oldTag)) {\n                newTag = this.DEFAULT_SEMANTIC_MAP[oldTag];\n            } else {\n                return;\n            }\n\n            $(oldTag, this.$ed).each(function () {\n                var $oldTag = $(this);\n                if($oldTag.contents().length === 0) {\n                    return false;\n                }\n\n                $oldTag.wrap('<' + newTag + '/>');\n                if (copyAttributes) {\n                    $.each($oldTag.prop('attributes'), function () {\n                        $oldTag.parent().attr(this.name, this.value);\n                    });\n                }\n                $oldTag.contents().unwrap();\n            });\n        },\n\n        // Function call when user click on \"Insert Link\"\n        createLink: function () {\n            var t = this,\n                documentSelection = t.doc.getSelection(),\n                selectedRange = documentSelection.getRangeAt(0),\n                node = documentSelection.focusNode,\n                text = new XMLSerializer().serializeToString(selectedRange.cloneContents()) || selectedRange + '',\n                url,\n                title,\n                target;\n\n            while (['A', 'DIV'].indexOf(node.nodeName) < 0) {\n                node = node.parentNode;\n            }\n\n            if (node && node.nodeName === 'A') {\n                var $a = $(node);\n                text = $a.text();\n                url = $a.attr('href');\n                if (!t.o.minimalLinks) {\n                    title = $a.attr('title');\n                    target = $a.attr('target') || t.o.defaultLinkTarget;\n                }\n                var range = t.doc.createRange();\n                range.selectNode(node);\n                documentSelection.removeAllRanges();\n                documentSelection.addRange(range);\n            }\n\n            t.saveRange();\n\n            var options = {\n                url: {\n                    label: 'URL',\n                    required: true,\n                    value: url\n                },\n                text: {\n                    label: t.lang.text,\n                    value: text\n                }\n            };\n            if (!t.o.minimalLinks) {\n                $.extend(options, {\n                    title: {\n                        label: t.lang.title,\n                        value: title\n                    },\n                    target: {\n                        label: t.lang.target,\n                        value: target\n                    }\n                });\n            }\n\n            t.openModalInsert(t.lang.createLink, options, function (v) { // v is value\n                var url = t.prependUrlPrefix(v.url);\n                if (!url.length) {\n                    return false;\n                }\n\n                var link = $(['<a href=\"', url, '\">', v.text || v.url, '</a>'].join(''));\n\n                if (v.title) {\n                    link.attr('title', v.title);\n                }\n                if (v.target || t.o.defaultLinkTarget) {\n                    link.attr('target', v.target || t.o.defaultLinkTarget);\n                }\n                t.range.deleteContents();\n                t.range.insertNode(link[0]);\n                t.syncCode();\n                t.$c.trigger('tbwchange');\n                return true;\n            });\n        },\n        prependUrlPrefix: function (url) {\n            var t = this;\n            if (!t.urlPrefix) {\n                return url;\n            }\n\n            var VALID_LINK_PREFIX = /^([a-z][-+.a-z0-9]*:|\\/|#)/i;\n            if (VALID_LINK_PREFIX.test(url)) {\n                return url;\n            }\n\n            var SIMPLE_EMAIL_REGEX = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n            if (SIMPLE_EMAIL_REGEX.test(url)) {\n                return 'mailto:' + url;\n            }\n\n            return t.urlPrefix + url;\n        },\n        unlink: function () {\n            var t = this,\n                documentSelection = t.doc.getSelection(),\n                node = documentSelection.focusNode;\n\n            if (documentSelection.isCollapsed) {\n                while (['A', 'DIV'].indexOf(node.nodeName) < 0) {\n                    node = node.parentNode;\n                }\n\n                if (node && node.nodeName === 'A') {\n                    var range = t.doc.createRange();\n                    range.selectNode(node);\n                    documentSelection.removeAllRanges();\n                    documentSelection.addRange(range);\n                }\n            }\n            t.execCmd('unlink', undefined, undefined, true);\n        },\n        insertImage: function () {\n            var t = this;\n            t.saveRange();\n\n            var options = {\n                url: {\n                    label: 'URL',\n                    required: true\n                },\n                alt: {\n                    label: t.lang.description,\n                    value: t.getRangeText()\n                }\n            };\n\n            if (t.o.imageWidthModalEdit) {\n                options.width = {};\n            }\n\n            t.openModalInsert(t.lang.insertImage, options, function (v) { // v are values\n                t.execCmd('insertImage', v.url, false, true);\n                var $img = $('img[src=\"' + v.url + '\"]:not([alt])', t.$box);\n                $img.attr('alt', v.alt);\n\n                if (t.o.imageWidthModalEdit) {\n                    $img.attr({\n                        width: v.width\n                    });\n                }\n\n                t.syncCode();\n                t.$c.trigger('tbwchange');\n\n                return true;\n            });\n        },\n        fullscreen: function () {\n            var t = this,\n                prefix = t.o.prefix,\n                fullscreenCssClass = prefix + 'fullscreen',\n                fullscreenPlaceholderClass = fullscreenCssClass + '-placeholder',\n                isFullscreen,\n                editorHeight = t.$box.outerHeight();\n\n            t.$box.toggleClass(fullscreenCssClass);\n            isFullscreen = t.$box.hasClass(fullscreenCssClass);\n\n            if (isFullscreen) {\n                t.$box.before(\n                    $('<div/>', {\n                        class: fullscreenPlaceholderClass\n                    }).css({\n                        height: editorHeight\n                    })\n                );\n            } else {\n                $('.' + fullscreenPlaceholderClass).remove();\n            }\n\n            $('body').toggleClass(prefix + 'body-fullscreen', isFullscreen);\n            $(window).trigger('scroll');\n            t.$c.trigger('tbw' + (isFullscreen ? 'open' : 'close') + 'fullscreen');\n        },\n\n\n        /*\n         * Call method of trumbowyg if exist\n         * else try to call anonymous function\n         * and finally native execCommand\n         */\n        execCmd: function (cmd, param, forceCss, skipTrumbowyg) {\n            var t = this;\n            skipTrumbowyg = !!skipTrumbowyg || '';\n\n            if (cmd !== 'dropdown') {\n                t.$ed.focus();\n            }\n\n            try {\n                t.doc.execCommand('styleWithCSS', false, forceCss || false);\n            } catch (c) {\n            }\n\n            try {\n                t[cmd + skipTrumbowyg](param);\n            } catch (c) {\n                try {\n                    cmd(param);\n                } catch (e2) {\n                    if (cmd === 'insertHorizontalRule') {\n                        param = undefined;\n                    } else if (cmd === 'formatBlock' && t.isIE) {\n                        param = '<' + param + '>';\n                    }\n\n                    t.doc.execCommand(cmd, false, param);\n\n                    t.syncCode();\n                    t.semanticCode(false, true);\n                }\n\n                if (cmd !== 'dropdown') {\n                    t.updateButtonPaneStatus();\n                    t.$c.trigger('tbwchange');\n                }\n            }\n        },\n\n\n        // Open a modal box\n        openModal: function (title, content, buildForm) {\n            var t = this,\n                prefix = t.o.prefix;\n\n            buildForm = buildForm !== false;\n\n            // No open a modal box when exist other modal box\n            if ($('.' + prefix + 'modal-box', t.$box).length > 0) {\n                return false;\n            }\n            if (t.o.autogrowOnEnter) {\n                t.autogrowOnEnterDontClose = true;\n            }\n\n            t.saveRange();\n            t.showOverlay();\n\n            // Disable all btnPane btns\n            t.$btnPane.addClass(prefix + 'disable');\n\n            // Build out of ModalBox, it's the mask for animations\n            var $modal = $('<div/>', {\n                class: prefix + 'modal ' + prefix + 'fixed-top'\n            }).css({\n                top: t.$box.offset().top + t.$btnPane.height(),\n                zIndex: 99999\n            }).appendTo($(t.doc.body));\n\n            // Click on overlay close modal by cancelling them\n            t.$overlay.one('click', function () {\n                $modal.trigger(CANCEL_EVENT);\n                return false;\n            });\n\n            // Build the form\n            var formOrContent;\n            if (buildForm) {\n                formOrContent = $('<form/>', {\n                    action: '',\n                    html: content\n                })\n                  .on('submit', function () {\n                      $modal.trigger(CONFIRM_EVENT);\n                      return false;\n                  })\n                  .on('reset', function () {\n                      $modal.trigger(CANCEL_EVENT);\n                      return false;\n                  })\n                  .on('submit reset', function () {\n                      if (t.o.autogrowOnEnter) {\n                          t.autogrowOnEnterDontClose = false;\n                      }\n                  });\n            } else {\n                formOrContent = content;\n            }\n\n\n            // Build ModalBox and animate to show them\n            var $box = $('<div/>', {\n                class: prefix + 'modal-box',\n                html: formOrContent\n            })\n                .css({\n                    top: '-' + t.$btnPane.outerHeight(),\n                    opacity: 0,\n                    paddingBottom: buildForm ? null : '5%',\n                })\n                .appendTo($modal)\n                .animate({\n                    top: 0,\n                    opacity: 1\n                }, 100);\n\n\n            // Append title\n            if (title) {\n                $('<span/>', {\n                    text: title,\n                    class: prefix + 'modal-title'\n                }).prependTo($box);\n            }\n\n            if (buildForm) {\n                // Focus in modal box\n                $('input:first', $box).focus();\n\n                // Append Confirm and Cancel buttons\n                t.buildModalBtn('submit', $box);\n                t.buildModalBtn('reset', $box);\n\n                $modal.height($box.outerHeight() + 10);\n            }\n\n            $(window).trigger('scroll');\n            t.$c.trigger('tbwmodalopen');\n\n            return $modal;\n        },\n        // @param n is name of modal\n        buildModalBtn: function (n, $modal) {\n            var t = this,\n                prefix = t.o.prefix;\n\n            return $('<button/>', {\n                class: prefix + 'modal-button ' + prefix + 'modal-' + n,\n                type: n,\n                text: t.lang[n] || n\n            }).appendTo($('form', $modal));\n        },\n        // close current modal box\n        closeModal: function () {\n            var t = this,\n                prefix = t.o.prefix;\n\n            t.$btnPane.removeClass(prefix + 'disable');\n            t.$overlay.off();\n\n            // Find the modal box\n            var $modalBox = $('.' + prefix + 'modal-box', $(t.doc.body));\n\n            $modalBox.animate({\n                top: '-' + $modalBox.height()\n            }, 100, function () {\n                $modalBox.parent().remove();\n                t.hideOverlay();\n                t.$c.trigger('tbwmodalclose');\n            });\n\n            t.restoreRange();\n        },\n        // Pre-formatted build and management modal\n        openModalInsert: function (title, fields, cmd) {\n            var t = this,\n                prefix = t.o.prefix,\n                lg = t.lang,\n                html = '';\n\n            $.each(fields, function (fieldName, field) {\n                var l = field.label || fieldName,\n                    n = field.name || fieldName,\n                    a = field.attributes || {};\n\n                var attr = Object.keys(a).map(function (prop) {\n                    return prop + '=\"' + a[prop] + '\"';\n                }).join(' ');\n\n                html += '<label><input type=\"' + (field.type || 'text') + '\" name=\"' + n + '\"' +\n                    (field.type === 'checkbox' && field.value ? ' checked=\"checked\"' : ' value=\"' + (field.value || '').replace(/\"/g, '&quot;')) +\n                    '\"' + attr + '><span class=\"' + prefix + 'input-infos\"><span>' +\n                    (lg[l] ? lg[l] : l) +\n                    '</span></span></label>';\n            });\n\n            return t.openModal(title, html)\n                .on(CONFIRM_EVENT, function () {\n                    var $form = $('form', $(this)),\n                        valid = true,\n                        values = {};\n\n                    $.each(fields, function (fieldName, field) {\n                        var n = field.name || fieldName;\n\n                        var $field = $('input[name=\"' + n + '\"]', $form),\n                            inputType = $field.attr('type');\n\n                        switch (inputType.toLowerCase()) {\n                            case 'checkbox':\n                                values[n] = $field.is(':checked');\n                                break;\n                            case 'radio':\n                                values[n] = $field.filter(':checked').val();\n                                break;\n                            default:\n                                values[n] = $.trim($field.val());\n                                break;\n                        }\n                        // Validate value\n                        if (field.required && values[n] === '') {\n                            valid = false;\n                            t.addErrorOnModalField($field, t.lang.required);\n                        } else if (field.pattern && !field.pattern.test(values[n])) {\n                            valid = false;\n                            t.addErrorOnModalField($field, field.patternError);\n                        }\n                    });\n\n                    if (valid) {\n                        t.restoreRange();\n\n                        if (cmd(values, fields)) {\n                            t.syncCode();\n                            t.$c.trigger('tbwchange');\n                            t.closeModal();\n                            $(this).off(CONFIRM_EVENT);\n                        }\n                    }\n                })\n                .one(CANCEL_EVENT, function () {\n                    $(this).off(CONFIRM_EVENT);\n                    t.closeModal();\n                });\n        },\n        addErrorOnModalField: function ($field, err) {\n            var prefix = this.o.prefix,\n                spanErrorClass = prefix + 'msg-error',\n                $label = $field.parent();\n\n            $field\n                .on('change keyup', function () {\n                    $label.removeClass(prefix + 'input-error');\n                    setTimeout(function () {\n                        $label.find('.' + spanErrorClass).remove();\n                    }, 150);\n                });\n\n            $label\n                .addClass(prefix + 'input-error')\n                .find('input+span')\n                .append(\n                    $('<span/>', {\n                        class: spanErrorClass,\n                        text: err\n                    })\n                );\n        },\n\n        getDefaultImgDblClickHandler: function () {\n            var t = this;\n\n            return function () {\n                var $img = $(this),\n                    src = $img.attr('src'),\n                    base64 = '(Base64)';\n\n                if (src.indexOf('data:image') === 0) {\n                    src = base64;\n                }\n\n                var options = {\n                    url: {\n                        label: 'URL',\n                        value: src,\n                        required: true\n                    },\n                    alt: {\n                        label: t.lang.description,\n                        value: $img.attr('alt')\n                    }\n                };\n\n                if (t.o.imageWidthModalEdit) {\n                    options.width = {\n                        value: $img.attr('width') ? $img.attr('width') : ''\n                    };\n                }\n\n                t.openModalInsert(t.lang.insertImage, options, function (v) {\n                    if (v.url !== base64) {\n                        $img.attr({\n                            src: v.url\n                        });\n                    }\n                    $img.attr({\n                        alt: v.alt\n                    });\n\n                    if (t.o.imageWidthModalEdit) {\n                        if (parseInt(v.width) > 0) {\n                            $img.attr({\n                                width: v.width\n                            });\n                        } else {\n                            $img.removeAttr('width');\n                        }\n                    }\n\n                    return true;\n                });\n                return false;\n            };\n        },\n\n        // Range management\n        saveRange: function () {\n            var t = this,\n                documentSelection = t.doc.getSelection();\n\n            t.range = null;\n\n            if (!documentSelection || !documentSelection.rangeCount) {\n                return;\n            }\n\n            var savedRange = t.range = documentSelection.getRangeAt(0),\n                range = t.doc.createRange(),\n                rangeStart;\n            range.selectNodeContents(t.$ed[0]);\n            range.setEnd(savedRange.startContainer, savedRange.startOffset);\n            rangeStart = (range + '').length;\n            t.metaRange = {\n                start: rangeStart,\n                end: rangeStart + (savedRange + '').length\n            };\n        },\n        restoreRange: function () {\n            var t = this,\n                metaRange = t.metaRange,\n                savedRange = t.range,\n                documentSelection = t.doc.getSelection(),\n                range;\n\n            if (!savedRange) {\n                return;\n            }\n\n            if (metaRange && metaRange.start !== metaRange.end) { // Algorithm from http://jsfiddle.net/WeWy7/3/\n                var charIndex = 0,\n                    nodeStack = [t.$ed[0]],\n                    node,\n                    foundStart = false,\n                    stop = false;\n\n                range = t.doc.createRange();\n\n                while (!stop && (node = nodeStack.pop())) {\n                    if (node.nodeType === 3) {\n                        var nextCharIndex = charIndex + node.length;\n                        if (!foundStart && metaRange.start >= charIndex && metaRange.start <= nextCharIndex) {\n                            range.setStart(node, metaRange.start - charIndex);\n                            foundStart = true;\n                        }\n                        if (foundStart && metaRange.end >= charIndex && metaRange.end <= nextCharIndex) {\n                            range.setEnd(node, metaRange.end - charIndex);\n                            stop = true;\n                        }\n                        charIndex = nextCharIndex;\n                    } else {\n                        var cn = node.childNodes,\n                            i = cn.length;\n\n                        while (i > 0) {\n                            i -= 1;\n                            nodeStack.push(cn[i]);\n                        }\n                    }\n                }\n            }\n\n            // Fix IE11 Error 'Could not complete the operation due to error 800a025e'.\n            // https://stackoverflow.com/questions/16160996/could-not-complete-the-operation-due-to-error-800a025e\n            try {\n                documentSelection.removeAllRanges();\n            } catch (e) {\n            }\n\n            documentSelection.addRange(range || savedRange);\n        },\n        getRangeText: function () {\n            return this.range + '';\n        },\n\n        clearButtonPaneStatus: function () {\n            var t = this,\n              prefix = t.o.prefix,\n              activeClasses = prefix + 'active-button ' + prefix + 'active',\n              originalIconClass = prefix + 'original-icon';\n\n            // Reset all buttons and dropdown state\n            $('.' + prefix + 'active-button', t.$btnPane).removeClass(activeClasses);\n            $('.' + originalIconClass, t.$btnPane).each(function () {\n                $(this).find('svg use').attr('xlink:href', $(this).data(originalIconClass));\n            });\n        },\n        updateButtonPaneStatus: function () {\n            var t = this,\n                prefix = t.o.prefix,\n                activeClasses = prefix + 'active-button ' + prefix + 'active',\n                originalIconClass = prefix + 'original-icon',\n                tags = t.getTagsRecursive(t.doc.getSelection().focusNode);\n\n            t.clearButtonPaneStatus();\n\n            $.each(tags, function (i, tag) {\n                var btnName = t.tagToButton[tag.toLowerCase()],\n                    $btn = $('.' + prefix + btnName + '-button', t.$btnPane);\n\n                if ($btn.length > 0) {\n                    $btn.addClass(activeClasses);\n                } else {\n                    try {\n                        $btn = $('.' + prefix + 'dropdown .' + prefix + btnName + '-dropdown-button', t.$box);\n                        var $btnSvgUse = $btn.find('svg use'),\n                            dropdownBtnName = $btn.parent().data(prefix + 'dropdown'),\n                            $dropdownBtn = $('.' + prefix + dropdownBtnName + '-button', t.$box),\n                            $dropdownBtnSvgUse = $dropdownBtn.find('svg use');\n\n                        // Highlight the dropdown button\n                        $dropdownBtn.addClass(activeClasses);\n\n                        // Switch dropdown icon to the active sub-icon one\n                        if (t.o.changeActiveDropdownIcon && $btnSvgUse.length > 0) {\n                            // Save original icon\n                            $dropdownBtn\n                              .addClass(originalIconClass)\n                              .data(originalIconClass, $dropdownBtnSvgUse.attr('xlink:href'));\n\n                            // Put the active sub-button's icon\n                            $dropdownBtnSvgUse\n                              .attr('xlink:href', $btnSvgUse.attr('xlink:href'));\n                        }\n                    } catch (e) {\n                    }\n                }\n            });\n        },\n        getTagsRecursive: function (element, tags) {\n            var t = this;\n            tags = tags || (element && element.tagName ? [element.tagName] : []);\n\n            if (element && element.parentNode) {\n                element = element.parentNode;\n            } else {\n                return tags;\n            }\n\n            var tag = element.tagName;\n            if (tag === 'DIV') {\n                return tags;\n            }\n            if (tag === 'P' && element.style.textAlign !== '') {\n                tags.push(element.style.textAlign);\n            }\n\n            $.each(t.tagHandlers, function (i, tagHandler) {\n                tags = tags.concat(tagHandler(element, t));\n            });\n\n            tags.push(tag);\n\n            return t.getTagsRecursive(element, tags).filter(function (tag) {\n                return tag != null;\n            });\n        },\n\n        // Plugins\n        initPlugins: function () {\n            var t = this;\n            t.loadedPlugins = [];\n            $.each($.trumbowyg.plugins, function (name, plugin) {\n                if (!plugin.shouldInit || plugin.shouldInit(t)) {\n                    plugin.init(t);\n                    if (plugin.tagHandler) {\n                        t.tagHandlers.push(plugin.tagHandler);\n                    }\n                    t.loadedPlugins.push(plugin);\n                }\n            });\n        },\n        destroyPlugins: function () {\n            var t = this;\n            $.each(this.loadedPlugins, function (i, plugin) {\n                if (plugin.destroy) {\n                    plugin.destroy(t);\n                }\n            });\n        }\n    };\n})(navigator, window, document, jQuery);\n","/* ===========================================================\n * trumbowyg.allowTagsFromPaste.js v1.0.2\n * It cleans tags from pasted text, whilst allowing several specified tags\n * http://alex-d.github.com/Trumbowyg\n * ===========================================================\n * Author\t: Fathi Anshory (0x00000F5C)\n * Twitter\t: @fscchannl\n * Notes:\n *  - removeformatPasted must be set to FALSE since it was applied prior to pasteHandlers, or else it will be useless\n *\t- It is most advisable to use along with the cleanpaste plugin, or else you'd end up with dirty markup\n */\n\n(function ($) {\n    'use strict';\n\n    var defaultOptions = {\n        // When empty, all tags are allowed making this plugin useless\n        // If you want to remove all tags, use removeformatPasted core option instead\n        allowedTags: [],\n        // List of tags which can be allowed\n        removableTags: [\n            'a',\n            'abbr',\n            'address',\n            'b',\n            'bdi',\n            'bdo',\n            'blockquote',\n            'br',\n            'cite',\n            'code',\n            'del',\n            'dfn',\n            'details',\n            'em',\n            'h1',\n            'h2',\n            'h3',\n            'h4',\n            'h5',\n            'h6',\n            'hr',\n            'i',\n            'ins',\n            'kbd',\n            'mark',\n            'meter',\n            'pre',\n            'progress',\n            'q',\n            'rp',\n            'rt',\n            'ruby',\n            's',\n            'samp',\n            'small',\n            'span',\n            'strong',\n            'sub',\n            'summary',\n            'sup',\n            'time',\n            'u',\n            'var',\n            'wbr',\n            'img',\n            'map',\n            'area',\n            'canvas',\n            'figcaption',\n            'figure',\n            'picture',\n            'audio',\n            'source',\n            'track',\n            'video',\n            'ul',\n            'ol',\n            'li',\n            'dl',\n            'dt',\n            'dd',\n            'table',\n            'caption',\n            'th',\n            'tr',\n            'td',\n            'thead',\n            'tbody',\n            'tfoot',\n            'col',\n            'colgroup',\n            'style',\n            'div',\n            'p',\n            'form',\n            'input',\n            'textarea',\n            'button',\n            'select',\n            'optgroup',\n            'option',\n            'label',\n            'fieldset',\n            'legend',\n            'datalist',\n            'keygen',\n            'output',\n            'iframe',\n            'link',\n            'nav',\n            'header',\n            'hgroup',\n            'footer',\n            'main',\n            'section',\n            'article',\n            'aside',\n            'dialog',\n            'script',\n            'noscript',\n            'embed',\n            'object',\n            'param'\n        ]\n    };\n\n    $.extend(true, $.trumbowyg, {\n        plugins: {\n            allowTagsFromPaste: {\n                init: function (trumbowyg) {\n                    // Force disable remove format pasted\n                    trumbowyg.o.removeformatPasted = false;\n\n                    if (!trumbowyg.o.plugins.allowTagsFromPaste) {\n                        return;\n                    }\n\n                    var allowedTags = trumbowyg.o.plugins.allowTagsFromPaste.allowedTags || defaultOptions.allowedTags;\n                    var removableTags = trumbowyg.o.plugins.allowTagsFromPaste.removableTags || defaultOptions.removableTags;\n\n                    if (allowedTags.length === 0) {\n                        return;\n                    }\n\n                    // Get list of tags to remove\n                    var tagsToRemove = $(removableTags).not(allowedTags).get();\n\n                    trumbowyg.pasteHandlers.push(function () {\n                        setTimeout(function () {\n                            var processNodes = trumbowyg.$ed.html();\n                            $.each(tagsToRemove, function (iterator, tagName) {\n                                processNodes = processNodes.replace(new RegExp('<\\\\/?' + tagName + '(\\\\s[^>]*)?>', 'gi'), '');\n                            });\n                            trumbowyg.$ed.html(processNodes);\n                        }, 0);\n                    });\n                }\n            }\n        }\n    });\n})(jQuery);\n","/* ===========================================================\n * trumbowyg.cleanpaste.js v1.0\n * Font Clean paste plugin for Trumbowyg\n * http://alex-d.github.com/Trumbowyg\n * ===========================================================\n * Authors : Eric Radin\n *           Todd Graham (slackwalker)\n *\n * This plugin will perform a \"cleaning\" on any paste, in particular\n * it will clean pasted content of microsoft word document tags and classes.\n */\n\n(function ($) {\n    'use strict';\n\n    function checkValidTags(snippet) {\n        var theString = snippet;\n\n        // Replace uppercase element names with lowercase\n        theString = theString.replace(/<[^> ]*/g, function (match) {\n            return match.toLowerCase();\n        });\n\n        // Replace uppercase attribute names with lowercase\n        theString = theString.replace(/<[^>]*>/g, function (match) {\n            match = match.replace(/ [^=]+=/g, function (match2) {\n                return match2.toLowerCase();\n            });\n            return match;\n        });\n\n        // Put quotes around unquoted attributes\n        theString = theString.replace(/<[^>]*>/g, function (match) {\n            match = match.replace(/( [^=]+=)([^\"][^ >]*)/g, '$1\\\"$2\\\"');\n            return match;\n        });\n\n        return theString;\n    }\n\n    function cleanIt(html) {\n        // first make sure all tags and attributes are made valid\n        html = checkValidTags(html);\n\n        // Replace opening bold tags with strong\n        html = html.replace(/<b(\\s+|>)/g, '<strong$1');\n        // Replace closing bold tags with closing strong\n        html = html.replace(/<\\/b(\\s+|>)/g, '</strong$1');\n\n        // Replace italic tags with em\n        html = html.replace(/<i(\\s+|>)/g, '<em$1');\n        // Replace closing italic tags with closing em\n        html = html.replace(/<\\/i(\\s+|>)/g, '</em$1');\n\n        // strip out comments -cgCraft\n        html = html.replace(/<!(?:--[\\s\\S]*?--\\s*)?>\\s*/g, '');\n\n        // strip out &nbsp; -cgCraft\n        html = html.replace(/&nbsp;/gi, ' ');\n        // strip out extra spaces -cgCraft\n        html = html.replace(/ <\\//gi, '</');\n\n        // Remove multiple spaces\n        html.replace(/\\s+/g, ' ');\n\n        // strip &nbsp; -cgCraft\n        html = html.replace(/^\\s*|\\s*$/g, '');\n\n        // Strip out unaccepted attributes\n        html = html.replace(/<[^>]*>/g, function (match) {\n            match = match.replace(/ ([^=]+)=\"[^\"]*\"/g, function (match2, attributeName) {\n                if (['alt', 'href', 'src', 'title'].indexOf(attributeName) !== -1) {\n                    return match2;\n                }\n                return '';\n            });\n            return match;\n        });\n\n        // Final clean out for MS Word crud\n        html = html.replace(/<\\?xml[^>]*>/g, '');\n        html = html.replace(/<[^ >]+:[^>]*>/g, '');\n        html = html.replace(/<\\/[^ >]+:[^>]*>/g, '');\n\n        // remove unwanted tags\n        html = html.replace(/<(div|span|style|meta|link).*?>/gi, '');\n\n        return html;\n    }\n\n    // clean editor\n    // this will clean the inserted contents\n    // it does a compare, before and after paste to determine the\n    // pasted contents\n    $.extend(true, $.trumbowyg, {\n        plugins: {\n            cleanPaste: {\n                init: function (trumbowyg) {\n                    trumbowyg.pasteHandlers.push(function () {\n                        setTimeout(function () {\n                          try {\n                              trumbowyg.$ed.html(cleanIt(trumbowyg.$ed.html()));\n                          } catch (c) {\n                          }\n                        }, 0);\n                    });\n                }\n            }\n        }\n    });\n})(jQuery);\n","/* ===========================================================\n * trumbowyg.colors.js v1.2\n * Colors picker plugin for Trumbowyg\n * http://alex-d.github.com/Trumbowyg\n * ===========================================================\n * Author : Alexandre Demode (Alex-D)\n *          Twitter : @AlexandreDemode\n *          Website : alex-d.fr\n */\n\n(function ($) {\n    'use strict';\n\n    $.extend(true, $.trumbowyg, {\n        langs: {\n            // jshint camelcase:false\n            cs: {\n                foreColor: 'Barva textu',\n                backColor: 'Barva pozadí'\n            },\n            en: {\n                foreColor: 'Text color',\n                backColor: 'Background color',\n                foreColorRemove: 'Remove text color',\n                backColorRemove: 'Remove background color'\n            },\n            da: {\n                foreColor: 'Tekstfarve',\n                backColor: 'Baggrundsfarve'\n            },\n            fr: {\n                foreColor: 'Couleur du texte',\n                backColor: 'Couleur de fond',\n                foreColorRemove: 'Supprimer la couleur du texte',\n                backColorRemove: 'Supprimer la couleur de fond'\n            },\n            de: {\n                foreColor: 'Textfarbe',\n                backColor: 'Hintergrundfarbe'\n            },\n            nl: {\n                foreColor: 'Tekstkleur',\n                backColor: 'Achtergrondkleur'\n            },\n            sk: {\n                foreColor: 'Farba textu',\n                backColor: 'Farba pozadia'\n            },\n            zh_cn: {\n                foreColor: '文字颜色',\n                backColor: '背景颜色'\n            },\n            zh_tw: {\n                foreColor: '文字顏色',\n                backColor: '背景顏色'\n            },\n            ru: {\n                foreColor: 'Цвет текста',\n                backColor: 'Цвет выделения текста'\n            },\n            ja: {\n                foreColor: '文字色',\n                backColor: '背景色'\n            },\n            tr: {\n                foreColor: 'Yazı rengi',\n                backColor: 'Arkaplan rengi'\n            },\n            pt_br: {\n                foreColor: 'Cor de fonte',\n                backColor: 'Cor de fundo'\n            },\n            ko: {\n                foreColor: '글자색',\n                backColor: '배경색',\n                foreColorRemove: '글자색 지우기',\n                backColorRemove: '배경색 지우기'\n            },\n        }\n    });\n\n    // jshint camelcase:true\n\n\n    function hex(x) {\n        return ('0' + parseInt(x).toString(16)).slice(-2);\n    }\n\n    function colorToHex(rgb) {\n        if (rgb.search('rgb') === -1) {\n            return rgb.replace('#', '');\n        } else if (rgb === 'rgba(0, 0, 0, 0)') {\n            return 'transparent';\n        } else {\n            rgb = rgb.match(/^rgba?\\((\\d+),\\s*(\\d+),\\s*(\\d+)(?:,\\s*(\\d+))?\\)$/);\n            return hex(rgb[1]) + hex(rgb[2]) + hex(rgb[3]);\n        }\n    }\n\n    function colorTagHandler(element, trumbowyg) {\n        var tags = [];\n\n        if (!element.style) {\n            return tags;\n        }\n\n        // background color\n        if (element.style.backgroundColor !== '') {\n            var backColor = colorToHex(element.style.backgroundColor);\n            if (trumbowyg.o.plugins.colors.colorList.indexOf(backColor) >= 0) {\n                tags.push('backColor' + backColor);\n            } else {\n                tags.push('backColorFree');\n            }\n        }\n\n        // text color\n        var foreColor;\n        if (element.style.color !== '') {\n            foreColor = colorToHex(element.style.color);\n        } else if (element.hasAttribute('color')) {\n            foreColor = colorToHex(element.getAttribute('color'));\n        }\n        if (foreColor) {\n            if (trumbowyg.o.plugins.colors.colorList.indexOf(foreColor) >= 0) {\n                tags.push('foreColor' + foreColor);\n            } else {\n                tags.push('foreColorFree');\n            }\n        }\n\n        return tags;\n    }\n\n    var defaultOptions = {\n        colorList: [\n            'ffffff', '000000', 'eeece1', '1f497d', '4f81bd', 'c0504d', '9bbb59', '8064a2', '4bacc6', 'f79646', 'ffff00',\n            'f2f2f2', '7f7f7f', 'ddd9c3', 'c6d9f0', 'dbe5f1', 'f2dcdb', 'ebf1dd', 'e5e0ec', 'dbeef3', 'fdeada', 'fff2ca',\n            'd8d8d8', '595959', 'c4bd97', '8db3e2', 'b8cce4', 'e5b9b7', 'd7e3bc', 'ccc1d9', 'b7dde8', 'fbd5b5', 'ffe694',\n            'bfbfbf', '3f3f3f', '938953', '548dd4', '95b3d7', 'd99694', 'c3d69b', 'b2a2c7', 'b7dde8', 'fac08f', 'f2c314',\n            'a5a5a5', '262626', '494429', '17365d', '366092', '953734', '76923c', '5f497a', '92cddc', 'e36c09', 'c09100',\n            '7f7f7f', '0c0c0c', '1d1b10', '0f243e', '244061', '632423', '4f6128', '3f3151', '31859b', '974806', '7f6000'\n        ],\n        foreColorList: null, // fallbacks on colorList\n        backColorList: null, // fallbacks on colorList\n        allowCustomForeColor: true,\n        allowCustomBackColor: true,\n        displayAsList: false,\n    };\n\n    // Add all colors in two dropdowns\n    $.extend(true, $.trumbowyg, {\n        plugins: {\n            color: {\n                init: function (trumbowyg) {\n                    trumbowyg.o.plugins.colors = trumbowyg.o.plugins.colors || defaultOptions;\n                    var dropdownClass = trumbowyg.o.plugins.colors.displayAsList ? trumbowyg.o.prefix + 'dropdown--color-list' : '';\n\n                    var foreColorBtnDef = {\n                        dropdown: buildDropdown('foreColor', trumbowyg),\n                        dropdownClass: dropdownClass,\n                    },\n                    backColorBtnDef = {\n                        dropdown: buildDropdown('backColor', trumbowyg),\n                        dropdownClass: dropdownClass,\n                    };\n\n                    trumbowyg.addBtnDef('foreColor', foreColorBtnDef);\n                    trumbowyg.addBtnDef('backColor', backColorBtnDef);\n                },\n                tagHandler: colorTagHandler\n            }\n        }\n    });\n\n    function buildDropdown(fn, trumbowyg) {\n        var dropdown = [],\n            trumbowygColorOptions = trumbowyg.o.plugins.colors,\n            colorList = trumbowygColorOptions[fn + 'List'] || trumbowygColorOptions.colorList;\n\n        $.each(colorList, function (i, color) {\n            var btn = fn + color,\n                btnDef = {\n                    fn: fn,\n                    forceCss: true,\n                    hasIcon: false,\n                    text: trumbowyg.lang['#' + color] || ('#' + color),\n                    param: '#' + color,\n                    style: 'background-color: #' + color + ';'\n                };\n\n            if (trumbowygColorOptions.displayAsList && fn === 'foreColor') {\n                btnDef.style = 'color: #' + color + ' !important;';\n            }\n\n            trumbowyg.addBtnDef(btn, btnDef);\n            dropdown.push(btn);\n        });\n\n        // Remove color\n        var removeColorButtonName = fn + 'Remove',\n            removeColorBtnDef = {\n                fn: 'removeFormat',\n                hasIcon: false,\n                param: fn,\n                style: 'background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAYAAACp8Z5+AAAAG0lEQVQIW2NkQAAfEJMRmwBYhoGBYQtMBYoAADziAp0jtJTgAAAAAElFTkSuQmCC);'\n            };\n\n        if (trumbowygColorOptions.displayAsList) {\n            removeColorBtnDef.style = '';\n        }\n\n        trumbowyg.addBtnDef(removeColorButtonName, removeColorBtnDef);\n        dropdown.push(removeColorButtonName);\n\n        // Custom color\n        if (trumbowygColorOptions['allowCustom' + fn.charAt(0).toUpperCase() + fn.substr(1)]) {\n            // add free color btn\n            var freeColorButtonName = fn + 'Free',\n                freeColorBtnDef = {\n                    fn: function () {\n                        trumbowyg.openModalInsert(trumbowyg.lang[fn],\n                            {\n                                color: {\n                                    label: fn,\n                                    forceCss: true,\n                                    type: 'color',\n                                    value: '#FFFFFF'\n                                }\n                            },\n                            // callback\n                            function (values) {\n                                trumbowyg.execCmd(fn, values.color);\n                                return true;\n                            }\n                        );\n                    },\n                    hasIcon: false,\n                    text: '#',\n                    // style adjust for displaying the text\n                    style: 'text-indent: 0; line-height: 20px; padding: 0 5px;'\n                };\n\n            trumbowyg.addBtnDef(freeColorButtonName, freeColorBtnDef);\n            dropdown.push(freeColorButtonName);\n        }\n\n        return dropdown;\n    }\n})(jQuery);\n","/* ===========================================================\n * trumbowyg.emoji.js v0.1\n * Emoji picker plugin for Trumbowyg\n * http://alex-d.github.com/Trumbowyg\n * ===========================================================\n * Author : Nicolas Pion\n *          Twitter : @nicolas_pion\n */\n\n(function ($) {\n    'use strict';\n\n    var defaultOptions = {\n        emojiList: [\n            '&#x2049',\n            '&#x2122',\n            '&#x2139',\n            '&#x2194',\n            '&#x2195',\n            '&#x2196',\n            '&#x2197',\n            '&#x2198',\n            '&#x2199',\n            '&#x2328',\n            '&#x2600',\n            '&#x2601',\n            '&#x2602',\n            '&#x2603',\n            '&#x2604',\n            '&#x2611',\n            '&#x2614',\n            '&#x2615',\n            '&#x2618',\n            '&#x2620',\n            '&#x2622',\n            '&#x2623',\n            '&#x2626',\n            '&#x2638',\n            '&#x2639',\n            '&#x2640',\n            '&#x2642',\n            '&#x2648',\n            '&#x2649',\n            '&#x2650',\n            '&#x2651',\n            '&#x2652',\n            '&#x2653',\n            '&#x2660',\n            '&#x2663',\n            '&#x2665',\n            '&#x2666',\n            '&#x2668',\n            '&#x2692',\n            '&#x2693',\n            '&#x2694',\n            '&#x2695',\n            '&#x2696',\n            '&#x2697',\n            '&#x2699',\n            '&#x2702',\n            '&#x2705',\n            '&#x2708',\n            '&#x2709',\n            '&#x2712',\n            '&#x2714',\n            '&#x2716',\n            '&#x2721',\n            '&#x2728',\n            '&#x2733',\n            '&#x2734',\n            '&#x2744',\n            '&#x2747',\n            '&#x2753',\n            '&#x2754',\n            '&#x2755',\n            '&#x2757',\n            '&#x2763',\n            '&#x2764',\n            '&#x2795',\n            '&#x2796',\n            '&#x2797',\n            '&#x2934',\n            '&#x2935',\n            '&#x3030',\n            '&#x3297',\n            '&#x3299',\n            '&#x1F9E1',\n            '&#x1F49B',\n            '&#x1F49A',\n            '&#x1F499',\n            '&#x1F49C',\n            '&#x1F5A4',\n            '&#x1F494',\n            '&#x1F495',\n            '&#x1F49E',\n            '&#x1F493',\n            '&#x1F497',\n            '&#x1F496',\n            '&#x1F498',\n            '&#x1F49D',\n            '&#x1F49F',\n            '&#x262E',\n            '&#x271D',\n            '&#x262A',\n            '&#x1F549',\n            '&#x1F52F',\n            '&#x1F54E',\n            '&#x262F',\n            '&#x1F6D0',\n            '&#x26CE',\n            '&#x264A',\n            '&#x264B',\n            '&#x264C',\n            '&#x264D',\n            '&#x264E',\n            '&#x264F',\n            '&#x1F194',\n            '&#x269B',\n            '&#x267E',\n            '&#x1F251',\n            '&#x1F4F4',\n            '&#x1F4F3',\n            '&#x1F236',\n            '&#x1F21A',\n            '&#x1F238',\n            '&#x1F23A',\n            '&#x1F237',\n            '&#x1F19A',\n            '&#x1F4AE',\n            '&#x1F250',\n            '&#x1F234',\n            '&#x1F235',\n            '&#x1F239',\n            '&#x1F232',\n            '&#x1F170',\n            '&#x1F171',\n            '&#x1F18E',\n            '&#x1F191',\n            '&#x1F17E',\n            '&#x1F198',\n            '&#x274C',\n            '&#x2B55',\n            '&#x1F6D1',\n            '&#x26D4',\n            '&#x1F4DB',\n            '&#x1F6AB',\n            '&#x1F4AF',\n            '&#x1F4A2',\n            '&#x1F6B7',\n            '&#x1F6AF',\n            '&#x1F6B3',\n            '&#x1F6B1',\n            '&#x1F51E',\n            '&#x1F4F5',\n            '&#x1F6AD',\n            '&#x203C',\n            '&#x1F505',\n            '&#x1F506',\n            '&#x303D',\n            '&#x26A0',\n            '&#x1F6B8',\n            '&#x1F531',\n            '&#x269C',\n            '&#x1F530',\n            '&#x267B',\n            '&#x1F22F',\n            '&#x1F4B9',\n            '&#x274E',\n            '&#x1F310',\n            '&#x1F4A0',\n            '&#x24C2',\n            '&#x1F300',\n            '&#x1F4A4',\n            '&#x1F3E7',\n            '&#x1F6BE',\n            '&#x267F',\n            '&#x1F17F',\n            '&#x1F233',\n            '&#x1F202',\n            '&#x1F6C2',\n            '&#x1F6C3',\n            '&#x1F6C4',\n            '&#x1F6C5',\n            '&#x1F6B9',\n            '&#x1F6BA',\n            '&#x1F6BC',\n            '&#x1F6BB',\n            '&#x1F6AE',\n            '&#x1F3A6',\n            '&#x1F4F6',\n            '&#x1F201',\n            '&#x1F523',\n            '&#x1F524',\n            '&#x1F521',\n            '&#x1F520',\n            '&#x1F196',\n            '&#x1F197',\n            '&#x1F199',\n            '&#x1F192',\n            '&#x1F195',\n            '&#x1F193',\n            '&#x0030',\n            '&#x0031',\n            '&#x0032',\n            '&#x0033',\n            '&#x0034',\n            '&#x0035',\n            '&#x0036',\n            '&#x0037',\n            '&#x0038',\n            '&#x0039',\n            '&#x1F51F',\n            '&#x1F522',\n            '&#x0023',\n            '&#x002A',\n            '&#x23CF',\n            '&#x25B6',\n            '&#x23F8',\n            '&#x23EF',\n            '&#x23F9',\n            '&#x23FA',\n            '&#x23ED',\n            '&#x23EE',\n            '&#x23E9',\n            '&#x23EA',\n            '&#x23EB',\n            '&#x23EC',\n            '&#x25C0',\n            '&#x1F53C',\n            '&#x1F53D',\n            '&#x27A1',\n            '&#x2B05',\n            '&#x2B06',\n            '&#x2B07',\n            '&#x21AA',\n            '&#x21A9',\n            '&#x1F500',\n            '&#x1F501',\n            '&#x1F502',\n            '&#x1F504',\n            '&#x1F503',\n            '&#x1F3B5',\n            '&#x1F3B6',\n            '&#x1F4B2',\n            '&#x1F4B1',\n            '&#x00A9',\n            '&#x00AE',\n            '&#x27B0',\n            '&#x27BF',\n            '&#x1F51A',\n            '&#x1F519',\n            '&#x1F51B',\n            '&#x1F51D',\n            '&#x1F51C',\n            '&#x1F518',\n            '&#x26AA',\n            '&#x26AB',\n            '&#x1F534',\n            '&#x1F535',\n            '&#x1F53A',\n            '&#x1F53B',\n            '&#x1F538',\n            '&#x1F539',\n            '&#x1F536',\n            '&#x1F537',\n            '&#x1F533',\n            '&#x1F532',\n            '&#x25AA',\n            '&#x25AB',\n            '&#x25FE',\n            '&#x25FD',\n            '&#x25FC',\n            '&#x25FB',\n            '&#x2B1B',\n            '&#x2B1C',\n            '&#x1F508',\n            '&#x1F507',\n            '&#x1F509',\n            '&#x1F50A',\n            '&#x1F514',\n            '&#x1F515',\n            '&#x1F4E3',\n            '&#x1F4E2',\n            '&#x1F5E8',\n            '&#x1F441',\n            '&#x1F4AC',\n            '&#x1F4AD',\n            '&#x1F5EF',\n            '&#x1F0CF',\n            '&#x1F3B4',\n            '&#x1F004',\n            '&#x1F550',\n            '&#x1F551',\n            '&#x1F552',\n            '&#x1F553',\n            '&#x1F554',\n            '&#x1F555',\n            '&#x1F556',\n            '&#x1F557',\n            '&#x1F558',\n            '&#x1F559',\n            '&#x1F55A',\n            '&#x1F55B',\n            '&#x1F55C',\n            '&#x1F55D',\n            '&#x1F55E',\n            '&#x1F55F',\n            '&#x1F560',\n            '&#x1F561',\n            '&#x1F562',\n            '&#x1F563',\n            '&#x1F564',\n            '&#x1F565',\n            '&#x1F566',\n            '&#x1F567',\n            '&#x26BD',\n            '&#x1F3C0',\n            '&#x1F3C8',\n            '&#x26BE',\n            '&#x1F94E',\n            '&#x1F3BE',\n            '&#x1F3D0',\n            '&#x1F3C9',\n            '&#x1F3B1',\n            '&#x1F3D3',\n            '&#x1F3F8',\n            '&#x1F945',\n            '&#x1F3D2',\n            '&#x1F3D1',\n            '&#x1F3CF',\n            '&#x1F94D',\n            '&#x26F3',\n            '&#x1F94F',\n            '&#x1F3F9',\n            '&#x1F3A3',\n            '&#x1F94A',\n            '&#x1F94B',\n            '&#x1F3BD',\n            '&#x1F6F9',\n            '&#x26F8',\n            '&#x1F94C',\n            '&#x1F6F7',\n            '&#x1F3BF',\n            '&#x26F7',\n            '&#x1F3C2',\n            '&#x1F3CB',\n            '&#x1F93C',\n            '&#x1F938',\n            '&#x26F9',\n            '&#x1F93A',\n            '&#x1F93E',\n            '&#x1F3CC',\n            '&#x1F3C7',\n            '&#x1F9D8',\n            '&#x1F3C4',\n            '&#x1F3CA',\n            '&#x1F93D',\n            '&#x1F6A3',\n            '&#x1F9D7',\n            '&#x1F6B5',\n            '&#x1F6B4',\n            '&#x1F3C6',\n            '&#x1F947',\n            '&#x1F948',\n            '&#x1F949',\n            '&#x1F3C5',\n            '&#x1F396',\n            '&#x1F3F5',\n            '&#x1F397',\n            '&#x1F3AB',\n            '&#x1F39F',\n            '&#x1F3AA',\n            '&#x1F939',\n            '&#x1F3AD',\n            '&#x1F3A8',\n            '&#x1F3AC',\n            '&#x1F3A4',\n            '&#x1F3A7',\n            '&#x1F3BC',\n            '&#x1F3B9',\n            '&#x1F941',\n            '&#x1F3B7',\n            '&#x1F3BA',\n            '&#x1F3B8',\n            '&#x1F3BB',\n            '&#x1F3B2',\n            '&#x1F3AF',\n            '&#x1F3B3',\n            '&#x1F3AE',\n            '&#x1F3B0',\n            '&#x231A',\n            '&#x1F4F1',\n            '&#x1F4F2',\n            '&#x1F4BB',\n            '&#x1F5A5',\n            '&#x1F5A8',\n            '&#x1F5B1',\n            '&#x1F5B2',\n            '&#x1F579',\n            '&#x265F',\n            '&#x1F9E9',\n            '&#x1F5DC',\n            '&#x1F4BD',\n            '&#x1F4BE',\n            '&#x1F4BF',\n            '&#x1F4C0',\n            '&#x1F4FC',\n            '&#x1F4F7',\n            '&#x1F4F8',\n            '&#x1F4F9',\n            '&#x1F3A5',\n            '&#x1F4FD',\n            '&#x1F39E',\n            '&#x1F4DE',\n            '&#x260E',\n            '&#x1F4DF',\n            '&#x1F4E0',\n            '&#x1F4FA',\n            '&#x1F4FB',\n            '&#x1F399',\n            '&#x1F39A',\n            '&#x1F39B',\n            '&#x23F1',\n            '&#x23F2',\n            '&#x23F0',\n            '&#x1F570',\n            '&#x231B',\n            '&#x23F3',\n            '&#x1F4E1',\n            '&#x1F9ED',\n            '&#x1F50B',\n            '&#x1F50C',\n            '&#x1F9F2',\n            '&#x1F4A1',\n            '&#x1F526',\n            '&#x1F56F',\n            '&#x1F9EF',\n            '&#x1F5D1',\n            '&#x1F6E2',\n            '&#x1F4B8',\n            '&#x1F4B5',\n            '&#x1F4B4',\n            '&#x1F4B6',\n            '&#x1F4B7',\n            '&#x1F4B0',\n            '&#x1F4B3',\n            '&#x1F48E',\n            '&#x1F9FF',\n            '&#x1F9F1',\n            '&#x1F9F0',\n            '&#x1F527',\n            '&#x1F528',\n            '&#x1F6E0',\n            '&#x26CF',\n            '&#x1F529',\n            '&#x26D3',\n            '&#x1F52B',\n            '&#x1F4A3',\n            '&#x1F52A',\n            '&#x1F5E1',\n            '&#x1F6E1',\n            '&#x1F6AC',\n            '&#x26B0',\n            '&#x26B1',\n            '&#x1F3FA',\n            '&#x1F52E',\n            '&#x1F4FF',\n            '&#x1F488',\n            '&#x1F9EA',\n            '&#x1F9EB',\n            '&#x1F9EC',\n            '&#x1F9EE',\n            '&#x1F52D',\n            '&#x1F52C',\n            '&#x1F573',\n            '&#x1F48A',\n            '&#x1F489',\n            '&#x1F321',\n            '&#x1F6BD',\n            '&#x1F6B0',\n            '&#x1F6BF',\n            '&#x1F6C1',\n            '&#x1F6C0',\n            '&#x1F9F9',\n            '&#x1F9FA',\n            '&#x1F9FB',\n            '&#x1F9FC',\n            '&#x1F9FD',\n            '&#x1F9F4',\n            '&#x1F9F5',\n            '&#x1F9F6',\n            '&#x1F6CE',\n            '&#x1F511',\n            '&#x1F5DD',\n            '&#x1F6AA',\n            '&#x1F6CB',\n            '&#x1F6CF',\n            '&#x1F6CC',\n            '&#x1F9F8',\n            '&#x1F5BC',\n            '&#x1F6CD',\n            '&#x1F6D2',\n            '&#x1F381',\n            '&#x1F388',\n            '&#x1F38F',\n            '&#x1F380',\n            '&#x1F38A',\n            '&#x1F389',\n            '&#x1F38E',\n            '&#x1F3EE',\n            '&#x1F390',\n            '&#x1F9E7',\n            '&#x1F4E9',\n            '&#x1F4E8',\n            '&#x1F4E7',\n            '&#x1F48C',\n            '&#x1F4E5',\n            '&#x1F4E4',\n            '&#x1F4E6',\n            '&#x1F3F7',\n            '&#x1F4EA',\n            '&#x1F4EB',\n            '&#x1F4EC',\n            '&#x1F4ED',\n            '&#x1F4EE',\n            '&#x1F4EF',\n            '&#x1F4DC',\n            '&#x1F4C3',\n            '&#x1F4C4',\n            '&#x1F9FE',\n            '&#x1F4D1',\n            '&#x1F4CA',\n            '&#x1F4C8',\n            '&#x1F4C9',\n            '&#x1F5D2',\n            '&#x1F5D3',\n            '&#x1F4C6',\n            '&#x1F4C5',\n            '&#x1F4C7',\n            '&#x1F5C3',\n            '&#x1F5F3',\n            '&#x1F5C4',\n            '&#x1F4CB',\n            '&#x1F4C1',\n            '&#x1F4C2',\n            '&#x1F5C2',\n            '&#x1F5DE',\n            '&#x1F4F0',\n            '&#x1F4D3',\n            '&#x1F4D4',\n            '&#x1F4D2',\n            '&#x1F4D5',\n            '&#x1F4D7',\n            '&#x1F4D8',\n            '&#x1F4D9',\n            '&#x1F4DA',\n            '&#x1F4D6',\n            '&#x1F516',\n            '&#x1F517',\n            '&#x1F4CE',\n            '&#x1F587',\n            '&#x1F4D0',\n            '&#x1F4CF',\n            '&#x1F9F7',\n            '&#x1F4CC',\n            '&#x1F4CD',\n            '&#x1F58A',\n            '&#x1F58B',\n            '&#x1F58C',\n            '&#x1F58D',\n            '&#x1F4DD',\n            '&#x270F',\n            '&#x1F50D',\n            '&#x1F50E',\n            '&#x1F50F',\n            '&#x1F510',\n            '&#x1F436',\n            '&#x1F431',\n            '&#x1F42D',\n            '&#x1F439',\n            '&#x1F430',\n            '&#x1F98A',\n            '&#x1F99D',\n            '&#x1F43B',\n            '&#x1F43C',\n            '&#x1F998',\n            '&#x1F9A1',\n            '&#x1F428',\n            '&#x1F42F',\n            '&#x1F981',\n            '&#x1F42E',\n            '&#x1F437',\n            '&#x1F43D',\n            '&#x1F438',\n            '&#x1F435',\n            '&#x1F648',\n            '&#x1F649',\n            '&#x1F64A',\n            '&#x1F412',\n            '&#x1F414',\n            '&#x1F427',\n            '&#x1F426',\n            '&#x1F424',\n            '&#x1F423',\n            '&#x1F425',\n            '&#x1F986',\n            '&#x1F9A2',\n            '&#x1F985',\n            '&#x1F989',\n            '&#x1F99C',\n            '&#x1F99A',\n            '&#x1F987',\n            '&#x1F43A',\n            '&#x1F417',\n            '&#x1F434',\n            '&#x1F984',\n            '&#x1F41D',\n            '&#x1F41B',\n            '&#x1F98B',\n            '&#x1F40C',\n            '&#x1F41A',\n            '&#x1F41E',\n            '&#x1F41C',\n            '&#x1F997',\n            '&#x1F577',\n            '&#x1F578',\n            '&#x1F982',\n            '&#x1F99F',\n            '&#x1F9A0',\n            '&#x1F422',\n            '&#x1F40D',\n            '&#x1F98E',\n            '&#x1F996',\n            '&#x1F995',\n            '&#x1F419',\n            '&#x1F991',\n            '&#x1F990',\n            '&#x1F980',\n            '&#x1F99E',\n            '&#x1F421',\n            '&#x1F420',\n            '&#x1F41F',\n            '&#x1F42C',\n            '&#x1F433',\n            '&#x1F40B',\n            '&#x1F988',\n            '&#x1F40A',\n            '&#x1F405',\n            '&#x1F406',\n            '&#x1F993',\n            '&#x1F98D',\n            '&#x1F418',\n            '&#x1F98F',\n            '&#x1F99B',\n            '&#x1F42A',\n            '&#x1F42B',\n            '&#x1F992',\n            '&#x1F999',\n            '&#x1F403',\n            '&#x1F402',\n            '&#x1F404',\n            '&#x1F40E',\n            '&#x1F416',\n            '&#x1F40F',\n            '&#x1F411',\n            '&#x1F410',\n            '&#x1F98C',\n            '&#x1F415',\n            '&#x1F429',\n            '&#x1F408',\n            '&#x1F413',\n            '&#x1F983',\n            '&#x1F54A',\n            '&#x1F407',\n            '&#x1F401',\n            '&#x1F400',\n            '&#x1F43F',\n            '&#x1F994',\n            '&#x1F43E',\n            '&#x1F409',\n            '&#x1F432',\n            '&#x1F335',\n            '&#x1F384',\n            '&#x1F332',\n            '&#x1F333',\n            '&#x1F334',\n            '&#x1F331',\n            '&#x1F33F',\n            '&#x1F340',\n            '&#x1F38D',\n            '&#x1F38B',\n            '&#x1F343',\n            '&#x1F342',\n            '&#x1F341',\n            '&#x1F344',\n            '&#x1F33E',\n            '&#x1F490',\n            '&#x1F337',\n            '&#x1F339',\n            '&#x1F940',\n            '&#x1F33A',\n            '&#x1F338',\n            '&#x1F33C',\n            '&#x1F33B',\n            '&#x1F31E',\n            '&#x1F31D',\n            '&#x1F31B',\n            '&#x1F31C',\n            '&#x1F31A',\n            '&#x1F315',\n            '&#x1F316',\n            '&#x1F317',\n            '&#x1F318',\n            '&#x1F311',\n            '&#x1F312',\n            '&#x1F313',\n            '&#x1F314',\n            '&#x1F319',\n            '&#x1F30E',\n            '&#x1F30D',\n            '&#x1F30F',\n            '&#x1F4AB',\n            '&#x2B50',\n            '&#x1F31F',\n            '&#x26A1',\n            '&#x1F4A5',\n            '&#x1F525',\n            '&#x1F32A',\n            '&#x1F308',\n            '&#x1F324',\n            '&#x26C5',\n            '&#x1F325',\n            '&#x1F326',\n            '&#x1F327',\n            '&#x26C8',\n            '&#x1F329',\n            '&#x1F328',\n            '&#x26C4',\n            '&#x1F32C',\n            '&#x1F4A8',\n            '&#x1F4A7',\n            '&#x1F4A6',\n            '&#x1F30A',\n            '&#x1F32B',\n            '&#x1F34F',\n            '&#x1F34E',\n            '&#x1F350',\n            '&#x1F34A',\n            '&#x1F34B',\n            '&#x1F34C',\n            '&#x1F349',\n            '&#x1F347',\n            '&#x1F353',\n            '&#x1F348',\n            '&#x1F352',\n            '&#x1F351',\n            '&#x1F96D',\n            '&#x1F34D',\n            '&#x1F965',\n            '&#x1F95D',\n            '&#x1F345',\n            '&#x1F346',\n            '&#x1F951',\n            '&#x1F966',\n            '&#x1F96C',\n            '&#x1F952',\n            '&#x1F336',\n            '&#x1F33D',\n            '&#x1F955',\n            '&#x1F954',\n            '&#x1F360',\n            '&#x1F950',\n            '&#x1F35E',\n            '&#x1F956',\n            '&#x1F968',\n            '&#x1F96F',\n            '&#x1F9C0',\n            '&#x1F95A',\n            '&#x1F373',\n            '&#x1F95E',\n            '&#x1F953',\n            '&#x1F969',\n            '&#x1F357',\n            '&#x1F356',\n            '&#x1F32D',\n            '&#x1F354',\n            '&#x1F35F',\n            '&#x1F355',\n            '&#x1F96A',\n            '&#x1F959',\n            '&#x1F32E',\n            '&#x1F32F',\n            '&#x1F957',\n            '&#x1F958',\n            '&#x1F96B',\n            '&#x1F35D',\n            '&#x1F35C',\n            '&#x1F372',\n            '&#x1F35B',\n            '&#x1F363',\n            '&#x1F371',\n            '&#x1F364',\n            '&#x1F359',\n            '&#x1F35A',\n            '&#x1F358',\n            '&#x1F365',\n            '&#x1F960',\n            '&#x1F362',\n            '&#x1F361',\n            '&#x1F367',\n            '&#x1F368',\n            '&#x1F366',\n            '&#x1F967',\n            '&#x1F370',\n            '&#x1F382',\n            '&#x1F96E',\n            '&#x1F9C1',\n            '&#x1F36E',\n            '&#x1F36D',\n            '&#x1F36C',\n            '&#x1F36B',\n            '&#x1F37F',\n            '&#x1F9C2',\n            '&#x1F369',\n            '&#x1F95F',\n            '&#x1F36A',\n            '&#x1F330',\n            '&#x1F95C',\n            '&#x1F36F',\n            '&#x1F95B',\n            '&#x1F37C',\n            '&#x1F375',\n            '&#x1F964',\n            '&#x1F376',\n            '&#x1F37A',\n            '&#x1F37B',\n            '&#x1F942',\n            '&#x1F377',\n            '&#x1F943',\n            '&#x1F378',\n            '&#x1F379',\n            '&#x1F37E',\n            '&#x1F944',\n            '&#x1F374',\n            '&#x1F37D',\n            '&#x1F963',\n            '&#x1F961',\n            '&#x1F962',\n            '&#x1F600',\n            '&#x1F603',\n            '&#x1F604',\n            '&#x1F601',\n            '&#x1F606',\n            '&#x1F605',\n            '&#x1F602',\n            '&#x1F923',\n            '&#x263A',\n            '&#x1F60A',\n            '&#x1F607',\n            '&#x1F642',\n            '&#x1F643',\n            '&#x1F609',\n            '&#x1F60C',\n            '&#x1F60D',\n            '&#x1F618',\n            '&#x1F970',\n            '&#x1F617',\n            '&#x1F619',\n            '&#x1F61A',\n            '&#x1F60B',\n            '&#x1F61B',\n            '&#x1F61D',\n            '&#x1F61C',\n            '&#x1F92A',\n            '&#x1F928',\n            '&#x1F9D0',\n            '&#x1F913',\n            '&#x1F60E',\n            '&#x1F929',\n            '&#x1F973',\n            '&#x1F60F',\n            '&#x1F612',\n            '&#x1F61E',\n            '&#x1F614',\n            '&#x1F61F',\n            '&#x1F615',\n            '&#x1F641',\n            '&#x1F623',\n            '&#x1F616',\n            '&#x1F62B',\n            '&#x1F629',\n            '&#x1F622',\n            '&#x1F62D',\n            '&#x1F624',\n            '&#x1F620',\n            '&#x1F621',\n            '&#x1F92C',\n            '&#x1F92F',\n            '&#x1F633',\n            '&#x1F631',\n            '&#x1F628',\n            '&#x1F630',\n            '&#x1F975',\n            '&#x1F976',\n            '&#x1F97A',\n            '&#x1F625',\n            '&#x1F613',\n            '&#x1F917',\n            '&#x1F914',\n            '&#x1F92D',\n            '&#x1F92B',\n            '&#x1F925',\n            '&#x1F636',\n            '&#x1F610',\n            '&#x1F611',\n            '&#x1F62C',\n            '&#x1F644',\n            '&#x1F62F',\n            '&#x1F626',\n            '&#x1F627',\n            '&#x1F62E',\n            '&#x1F632',\n            '&#x1F634',\n            '&#x1F924',\n            '&#x1F62A',\n            '&#x1F635',\n            '&#x1F910',\n            '&#x1F974',\n            '&#x1F922',\n            '&#x1F92E',\n            '&#x1F927',\n            '&#x1F637',\n            '&#x1F912',\n            '&#x1F915',\n            '&#x1F911',\n            '&#x1F920',\n            '&#x1F608',\n            '&#x1F47F',\n            '&#x1F479',\n            '&#x1F47A',\n            '&#x1F921',\n            '&#x1F4A9',\n            '&#x1F47B',\n            '&#x1F480',\n            '&#x1F47D',\n            '&#x1F47E',\n            '&#x1F916',\n            '&#x1F383',\n            '&#x1F63A',\n            '&#x1F638',\n            '&#x1F639',\n            '&#x1F63B',\n            '&#x1F63C',\n            '&#x1F63D',\n            '&#x1F640',\n            '&#x1F63F',\n            '&#x1F63E',\n            '&#x1F932',\n            '&#x1F450',\n            '&#x1F64C',\n            '&#x1F44F',\n            '&#x1F91D',\n            '&#x1F44D',\n            '&#x1F44E',\n            '&#x1F44A',\n            '&#x270A',\n            '&#x1F91B',\n            '&#x1F91C',\n            '&#x1F91E',\n            '&#x270C',\n            '&#x1F91F',\n            '&#x1F918',\n            '&#x1F44C',\n            '&#x1F448',\n            '&#x1F449',\n            '&#x1F446',\n            '&#x1F447',\n            '&#x261D',\n            '&#x270B',\n            '&#x1F91A',\n            '&#x1F590',\n            '&#x1F596',\n            '&#x1F44B',\n            '&#x1F919',\n            '&#x1F4AA',\n            '&#x1F9B5',\n            '&#x1F9B6',\n            '&#x1F595',\n            '&#x270D',\n            '&#x1F64F',\n            '&#x1F48D',\n            '&#x1F484',\n            '&#x1F48B',\n            '&#x1F444',\n            '&#x1F445',\n            '&#x1F442',\n            '&#x1F443',\n            '&#x1F463',\n            '&#x1F440',\n            '&#x1F9E0',\n            '&#x1F9B4',\n            '&#x1F9B7',\n            '&#x1F5E3',\n            '&#x1F464',\n            '&#x1F465',\n            '&#x1F476',\n            '&#x1F467',\n            '&#x1F9D2',\n            '&#x1F466',\n            '&#x1F469',\n            '&#x1F9D1',\n            '&#x1F468',\n            '&#x1F471',\n            '&#x1F9D4',\n            '&#x1F475',\n            '&#x1F9D3',\n            '&#x1F474',\n            '&#x1F472',\n            '&#x1F473',\n            '&#x1F9D5',\n            '&#x1F46E',\n            '&#x1F477',\n            '&#x1F482',\n            '&#x1F575',\n            '&#x1F470',\n            '&#x1F935',\n            '&#x1F478',\n            '&#x1F934',\n            '&#x1F936',\n            '&#x1F385',\n            '&#x1F9B8',\n            '&#x1F9B9',\n            '&#x1F9D9',\n            '&#x1F9DD',\n            '&#x1F9DB',\n            '&#x1F9DF',\n            '&#x1F9DE',\n            '&#x1F9DC',\n            '&#x1F9DA',\n            '&#x1F47C',\n            '&#x1F930',\n            '&#x1F931',\n            '&#x1F647',\n            '&#x1F481',\n            '&#x1F645',\n            '&#x1F646',\n            '&#x1F64B',\n            '&#x1F926',\n            '&#x1F937',\n            '&#x1F64E',\n            '&#x1F64D',\n            '&#x1F487',\n            '&#x1F486',\n            '&#x1F9D6',\n            '&#x1F485',\n            '&#x1F933',\n            '&#x1F483',\n            '&#x1F57A',\n            '&#x1F46F',\n            '&#x1F574',\n            '&#x1F6B6',\n            '&#x1F3C3',\n            '&#x1F46B',\n            '&#x1F46D',\n            '&#x1F46C',\n            '&#x1F491',\n            '&#x1F48F',\n            '&#x1F46A',\n            '&#x1F9E5',\n            '&#x1F45A',\n            '&#x1F455',\n            '&#x1F456',\n            '&#x1F454',\n            '&#x1F457',\n            '&#x1F459',\n            '&#x1F458',\n            '&#x1F97C',\n            '&#x1F460',\n            '&#x1F461',\n            '&#x1F462',\n            '&#x1F45E',\n            '&#x1F45F',\n            '&#x1F97E',\n            '&#x1F97F',\n            '&#x1F9E6',\n            '&#x1F9E4',\n            '&#x1F9E3',\n            '&#x1F3A9',\n            '&#x1F9E2',\n            '&#x1F452',\n            '&#x1F393',\n            '&#x26D1',\n            '&#x1F451',\n            '&#x1F45D',\n            '&#x1F45B',\n            '&#x1F45C',\n            '&#x1F4BC',\n            '&#x1F392',\n            '&#x1F453',\n            '&#x1F576',\n            '&#x1F97D',\n            '&#x1F302',\n            '&#x1F9B0',\n            '&#x1F9B1',\n            '&#x1F9B3',\n            '&#x1F9B2',\n            '&#x1F1FF',\n            '&#x1F1FE',\n            '&#x1F1FD',\n            '&#x1F1FC',\n            '&#x1F1FB',\n            '&#x1F1FA',\n            '&#x1F1F9',\n            '&#x1F1F8',\n            '&#x1F1F7',\n            '&#x1F1F6',\n            '&#x1F1F5',\n            '&#x1F1F4',\n            '&#x1F1F3',\n            '&#x1F1F2',\n            '&#x1F1F1',\n            '&#x1F1F0',\n            '&#x1F1EF',\n            '&#x1F1EE',\n            '&#x1F1ED',\n            '&#x1F1EC',\n            '&#x1F1EB',\n            '&#x1F1EA',\n            '&#x1F1E9',\n            '&#x1F1E8',\n            '&#x1F1E7',\n            '&#x1F1E6',\n            '&#x1F697',\n            '&#x1F695',\n            '&#x1F699',\n            '&#x1F68C',\n            '&#x1F68E',\n            '&#x1F3CE',\n            '&#x1F693',\n            '&#x1F691',\n            '&#x1F692',\n            '&#x1F690',\n            '&#x1F69A',\n            '&#x1F69B',\n            '&#x1F69C',\n            '&#x1F6F4',\n            '&#x1F6B2',\n            '&#x1F6F5',\n            '&#x1F3CD',\n            '&#x1F6A8',\n            '&#x1F694',\n            '&#x1F68D',\n            '&#x1F698',\n            '&#x1F696',\n            '&#x1F6A1',\n            '&#x1F6A0',\n            '&#x1F69F',\n            '&#x1F683',\n            '&#x1F68B',\n            '&#x1F69E',\n            '&#x1F69D',\n            '&#x1F684',\n            '&#x1F685',\n            '&#x1F688',\n            '&#x1F682',\n            '&#x1F686',\n            '&#x1F687',\n            '&#x1F68A',\n            '&#x1F689',\n            '&#x1F6EB',\n            '&#x1F6EC',\n            '&#x1F6E9',\n            '&#x1F4BA',\n            '&#x1F9F3',\n            '&#x1F6F0',\n            '&#x1F680',\n            '&#x1F6F8',\n            '&#x1F681',\n            '&#x1F6F6',\n            '&#x26F5',\n            '&#x1F6A4',\n            '&#x1F6E5',\n            '&#x1F6F3',\n            '&#x26F4',\n            '&#x1F6A2',\n            '&#x26FD',\n            '&#x1F6A7',\n            '&#x1F6A6',\n            '&#x1F6A5',\n            '&#x1F68F',\n            '&#x1F5FA',\n            '&#x1F5FF',\n            '&#x1F5FD',\n            '&#x1F5FC',\n            '&#x1F3F0',\n            '&#x1F3EF',\n            '&#x1F3DF',\n            '&#x1F3A1',\n            '&#x1F3A2',\n            '&#x1F3A0',\n            '&#x26F2',\n            '&#x26F1',\n            '&#x1F3D6',\n            '&#x1F3DD',\n            '&#x1F3DC',\n            '&#x1F30B',\n            '&#x26F0',\n            '&#x1F3D4',\n            '&#x1F5FB',\n            '&#x1F3D5',\n            '&#x26FA',\n            '&#x1F3E0',\n            '&#x1F3E1',\n            '&#x1F3D8',\n            '&#x1F3DA',\n            '&#x1F3D7',\n            '&#x1F3ED',\n            '&#x1F3E2',\n            '&#x1F3EC',\n            '&#x1F3E3',\n            '&#x1F3E4',\n            '&#x1F3E5',\n            '&#x1F3E6',\n            '&#x1F3E8',\n            '&#x1F3EA',\n            '&#x1F3EB',\n            '&#x1F3E9',\n            '&#x1F492',\n            '&#x1F3DB',\n            '&#x26EA',\n            '&#x1F54C',\n            '&#x1F54D',\n            '&#x1F54B',\n            '&#x26E9',\n            '&#x1F6E4',\n            '&#x1F6E3',\n            '&#x1F5FE',\n            '&#x1F391',\n            '&#x1F3DE',\n            '&#x1F305',\n            '&#x1F304',\n            '&#x1F320',\n            '&#x1F387',\n            '&#x1F386',\n            '&#x1F9E8',\n            '&#x1F307',\n            '&#x1F306',\n            '&#x1F3D9',\n            '&#x1F303',\n            '&#x1F30C',\n            '&#x1F309',\n            '&#x1F512',\n            '&#x1F513',\n            '&#x1F301',\n            '&#x1F3F3',\n            '&#x1F3F4',\n            '&#x1F3C1',\n            '&#x1F6A9',\n            '&#x1F38C',\n            '&#x1F3FB',\n            '&#x1F3FC',\n            '&#x1F3FD',\n            '&#x1F3FE',\n            '&#x1F3FF'\n        ]\n    };\n\n    // Add all emoji in a dropdown\n    $.extend(true, $.trumbowyg, {\n        langs: {\n            // jshint camelcase:false\n            en: {\n                emoji: 'Add an emoji'\n            },\n            da: {\n                emoji: 'Tilføj et humørikon'\n            },\n            de: {\n                emoji: 'Emoticon einfügen'\n            },\n            fr: {\n                emoji: 'Ajouter un emoji'\n            },\n            zh_cn: {\n                emoji: '添加表情'\n            },\n            ru: {\n                emoji: 'Вставить emoji'\n            },\n            ja: {\n                emoji: '絵文字の挿入'\n            },\n            tr: {\n                emoji: 'Emoji ekle'\n            },\n            ko: {\n                emoji: '이모지 넣기'\n            },\n        },\n        // jshint camelcase:true\n        plugins: {\n            emoji: {\n                init: function (trumbowyg) {\n                    trumbowyg.o.plugins.emoji = trumbowyg.o.plugins.emoji || defaultOptions;\n                    var emojiBtnDef = {\n                        dropdown: buildDropdown(trumbowyg)\n                    };\n                    trumbowyg.addBtnDef('emoji', emojiBtnDef);\n                }\n            }\n        }\n    });\n\n    function buildDropdown(trumbowyg) {\n        var dropdown = [];\n\n        $.each(trumbowyg.o.plugins.emoji.emojiList, function (i, emoji) {\n            if ($.isArray(emoji)) { // Custom emoji behaviour\n                var emojiCode = emoji[0],\n                    emojiUrl = emoji[1],\n                    emojiHtml = '<img src=\"' + emojiUrl + '\" alt=\"' + emojiCode + '\">',\n                    customEmojiBtnName = 'emoji-' + emojiCode.replace(/:/g, ''),\n                    customEmojiBtnDef = {\n                        hasIcon: false,\n                        text: emojiHtml,\n                        fn: function () {\n                            trumbowyg.execCmd('insertImage', emojiUrl, false, true);\n                            return true;\n                        }\n                    };\n\n                trumbowyg.addBtnDef(customEmojiBtnName, customEmojiBtnDef);\n                dropdown.push(customEmojiBtnName);\n            } else { // Default behaviour\n                var btn = emoji.replace(/:/g, ''),\n                    defaultEmojiBtnName = 'emoji-' + btn,\n                    defaultEmojiBtnDef = {\n                        text: emoji,\n                        fn: function () {\n                            var encodedEmoji = String.fromCodePoint(emoji.replace('&#', '0'));\n                            trumbowyg.execCmd('insertText', encodedEmoji);\n                            return true;\n                        }\n                    };\n\n                trumbowyg.addBtnDef(defaultEmojiBtnName, defaultEmojiBtnDef);\n                dropdown.push(defaultEmojiBtnName);\n            }\n        });\n\n        return dropdown;\n    }\n})(jQuery);\n","/*/* ===========================================================\n * trumbowyg.history.js v1.0\n * history plugin for Trumbowyg\n * http://alex-d.github.com/Trumbowyg\n * ===========================================================\n * Author : Sven Dunemann [dunemann@forelabs.eu]\n */\n\n(function ($) {\n    'use strict';\n    $.extend(true, $.trumbowyg, {\n        langs: {\n            // jshint camelcase:false\n            de: {\n                history: {\n                    redo: 'Wiederholen',\n                    undo: 'Rückgängig'\n                }\n            },\n            en: {\n                history: {\n                    redo: 'Redo',\n                    undo: 'Undo'\n                }\n            },\n            da: {\n                history: {\n                    redo: 'Annuller fortryd',\n                    undo: 'Fortryd'\n                }\n            },\n            fr: {\n                history: {\n                    redo: 'Annuler',\n                    undo: 'Rétablir'\n                }\n            },\n            zh_tw: {\n               history: {\n                   redo: '重做',\n                   undo: '復原'\n               }\n            },\n            pt_br: {\n                history: {\n                    redo: 'Refazer',\n                    undo: 'Desfazer'\n                }\n            },\n            ko: {\n                history: {\n                    redo: '다시 실행',\n                    undo: '되돌리기'\n                }\n            },\n            // jshint camelcase:true\n        },\n        plugins: {\n            history: {\n                init: function (t) {\n                    t.o.plugins.history = $.extend(true, {\n                        _stack: [],\n                        _index: -1,\n                        _focusEl: undefined\n                    }, t.o.plugins.history || {});\n\n                    var btnBuildDefRedo = {\n                        title: t.lang.history.redo,\n                        ico: 'redo',\n                        key: 'Y',\n                        fn: function () {\n                            if (t.o.plugins.history._index < t.o.plugins.history._stack.length - 1) {\n                                t.o.plugins.history._index += 1;\n                                var index = t.o.plugins.history._index;\n                                var newState = t.o.plugins.history._stack[index];\n\n                                t.execCmd('html', newState);\n                                // because of some semantic optimisations we have to save the state back\n                                // to history\n                                t.o.plugins.history._stack[index] = t.$ed.html();\n\n                                carretToEnd();\n                                toggleButtonStates();\n                            }\n                        }\n                    };\n\n                    var btnBuildDefUndo = {\n                        title: t.lang.history.undo,\n                        ico: 'undo',\n                        key: 'Z',\n                        fn: function () {\n                            if (t.o.plugins.history._index > 0) {\n                                t.o.plugins.history._index -= 1;\n                                var index = t.o.plugins.history._index,\n                                    newState = t.o.plugins.history._stack[index];\n\n                                t.execCmd('html', newState);\n                                // because of some semantic optimisations we have to save the state back\n                                // to history\n                                t.o.plugins.history._stack[index] = t.$ed.html();\n\n                                carretToEnd();\n                                toggleButtonStates();\n                            }\n                        }\n                    };\n\n                    var pushToHistory = function () {\n                        var index = t.o.plugins.history._index,\n                            stack = t.o.plugins.history._stack,\n                            latestState = stack.slice(-1)[0] || '<p></p>',\n                            prevState = stack[index],\n                            newState = t.$ed.html(),\n                            focusEl = t.doc.getSelection().focusNode,\n                            focusElText = '',\n                            latestStateTagsList,\n                            newStateTagsList,\n                            prevFocusEl = t.o.plugins.history._focusEl;\n\n                        latestStateTagsList = $('<div>' + latestState + '</div>').find('*').map(function () {\n                            return this.localName;\n                        });\n                        newStateTagsList = $('<div>' + newState + '</div>').find('*').map(function () {\n                            return this.localName;\n                        });\n                        if (focusEl) {\n                            t.o.plugins.history._focusEl = focusEl;\n                            focusElText = focusEl.outerHTML || focusEl.textContent;\n                        }\n\n                        if (newState !== prevState) {\n                            // a new stack entry is defined when current insert ends on a whitespace character\n                            // or count of node elements has been changed\n                            // or focused element differs from previous one\n                            if (focusElText.slice(-1).match(/\\s/) ||\n                                !arraysAreIdentical(latestStateTagsList, newStateTagsList) ||\n                                t.o.plugins.history._index <= 0 || focusEl !== prevFocusEl)\n                            {\n                                t.o.plugins.history._index += 1;\n                                // remove newer entries in history when something new was added\n                                // because timeline was changes with interaction\n                                t.o.plugins.history._stack = stack.slice(\n                                    0, t.o.plugins.history._index\n                                );\n                                // now add new state to modified history\n                                t.o.plugins.history._stack.push(newState);\n                            } else {\n                                // modify last stack entry\n                                t.o.plugins.history._stack[index] = newState;\n                            }\n\n                            toggleButtonStates();\n                        }\n                    };\n\n                    var toggleButtonStates = function () {\n                        var index = t.o.plugins.history._index,\n                            stackSize = t.o.plugins.history._stack.length,\n                            undoState = (index > 0),\n                            redoState = (stackSize !== 0 && index !== stackSize - 1);\n\n                        toggleButtonState('historyUndo', undoState);\n                        toggleButtonState('historyRedo', redoState);\n                    };\n\n                    var toggleButtonState = function (btn, enable) {\n                        var button = t.$box.find('.trumbowyg-' + btn + '-button');\n\n                        if (enable) {\n                            button.removeClass('trumbowyg-disable');\n                        } else if (!button.hasClass('trumbowyg-disable')) {\n                            button.addClass('trumbowyg-disable');\n                        }\n                    };\n\n                    var arraysAreIdentical = function (a, b) {\n                        if (a === b) {\n                            return true;\n                        }\n                        if (a == null || b == null) {\n                            return false;\n                        }\n                        if (a.length !== b.length) {\n                            return false;\n                        }\n\n                        for (var i = 0; i < a.length; i += 1) {\n                            if (a[i] !== b[i]) {\n                                return false;\n                            }\n                        }\n                        return true;\n                    };\n\n                    var carretToEnd = function () {\n                        var node = t.doc.getSelection().focusNode,\n                            range = t.doc.createRange();\n\n                        if (node.childNodes.length > 0) {\n                            range.setStartAfter(node.childNodes[node.childNodes.length - 1]);\n                            range.setEndAfter(node.childNodes[node.childNodes.length - 1]);\n                            t.doc.getSelection().removeAllRanges();\n                            t.doc.getSelection().addRange(range);\n                        }\n                    };\n\n                    t.$c.on('tbwinit tbwchange', pushToHistory);\n\n                    t.addBtnDef('historyRedo', btnBuildDefRedo);\n                    t.addBtnDef('historyUndo', btnBuildDefUndo);\n                }\n            }\n        }\n    });\n})(jQuery);\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","\n/**\n * shorten function for internal usage\n */\nconst esc = encodeURIComponent;\n\n/**\n * sanitize params and only return valid params\n * @param unix_timestamp\n * @param tags\n * @param output\n */\nconst getSanitizeParams = (\n\t{\n\t\tunix_timestamp_after = null,\n\t\tunix_timestamp_before = null,\n\t\ttags = null,\n\t\tnumber_of_particles = null,\n\t\torder_direction = null,\n\t\toutput = \"json\",\n\t} = {}\n)=>{\n\n\tconst params = {};\n\n\tif(unix_timestamp_after !== null){\n\t\tparams.unix_timestamp_after = parseInt(unix_timestamp_after);\n\t}\n\n\tif(unix_timestamp_before !== null){\n\t\tparams.unix_timestamp_before = parseInt(unix_timestamp_before);\n\t}\n\n\tif(number_of_particles !== null){\n\t\tparams.number_of_particles = parseInt(number_of_particles);\n\t}\n\n\tif(order_direction !== null) {\n\t\tparams.order_direction = order_direction;\n\t}\n\n\tif(tags !== null){\n\t\tif(typeof tags !== typeof []) throw new Error(\"Tags need to be an array of strings\");\n\t\tparams.tags = tags.map(esc);\n\t}\n\n\tif(output !== \"html\") output = \"json\";\n\tparams.output = output;\n\n\treturn params;\n\n};\n\n/**\n * stringify params\n * @param params\n * @return {string}\n */\nconst getParamsString = (params)=>{\n\treturn Object\n\t\t.keys(params)\n\t\t.map(param => {\n\t\t\tconst val = params[param];\n\t\t\tif(typeof val === typeof []){\n\t\t\t\treturn val.map(v=> `${param}[]=${v}`).join(\"&\");\n\t\t\t}\n\t\t\treturn param + \"=\" + params[param]\n\t\t})\n\t\t.join(\"&\");\n};\n\n/**\n * sanitize and stringify params\n * @param params\n * @return {string}\n */\nconst getSanitizedParamsString = (params)=>{\n\treturn getParamsString(getSanitizeParams(params));\n};\n\n\n/**\n * api for public use\n */\nexport const publicApi = (config) => {\n\n\tconst {routes} = config;\n\tlet last_request_timestamp = config.last_request_timestamp;\n\n\t/**\n\t * resolve particles response and save request timestamp\n\t * @param res\n\t * @return {*}\n\t */\n\tconst resolveParticles = (res)=>{\n\t\treturn res.json().then(json => json.particles );\n\t};\n\n\t/**\n\t * resolve particles response and save request timestamp\n\t * @param res\n\t * @return {*}\n\t */\n\tconst resolveUpdateParticles = (res)=>{\n\t\treturn res.json().then(json => {\n\t\t\tlast_request_timestamp = json.request_timestamp;\n\t\t\treturn json.particles\n\t\t});\n\t};\n\n\treturn {\n\t\tfetchParticles: (params)=>{\n\t\t\treturn fetch(routes.getParticles+\"?\"+getSanitizedParamsString(params),{\n\t\t\t\tmethod: 'GET',\n\t\t\t})\n\t\t\t.then(resolveParticles)\n\t\t\t.catch(console.error);\n\t\t},\n\t\tfetchParticlesUpdate: (params)=>{\n\t\t\tconst p = {\n\t\t\t\tunix_timestamp_after: last_request_timestamp,\n\t\t\t\torder_direction: \"DESC\",\n\t\t\t\t...params,\n\t\t\t};\n\t\t\treturn fetch(routes.getParticles+\"?\"+getSanitizedParamsString(p))\n\t\t\t\t.then(resolveUpdateParticles)\n\t\t\t\t.catch(console.error);\n\t\t},\n\t\tresetLastRequestTimestamp: ()=>{\n\t\t\tlast_request_timestamp = 0;\n\t\t}\n\t}\n};\n\nexport class PublicApi{\n\tconstructor(config){\n\t\tthis.api = publicApi(config);\n\t\tthis.fetchParticles = this.api.fetchParticles;\n\t\tthis.fetchParticlesUpdate = this.api.fetchParticlesUpdate;\n\t\tthis.resetLastRequestTimestamp = this.api.resetLastRequestTimestamp;\n\t}\n\n\tfetchParticles(params){\n\t\treturn this.api.fetchParticles(params);\n\t}\n\n\tfetchParticlesUpdate(params){\n\t\treturn this.api.fetchParticlesUpdate(params);\n\t}\n\n\tresetLastRequestTimestamp(){\n\t\tthis.api.resetLastRequestTimestamp();\n\t}\n}\n\n/**\n * api for admin use\n */\nexport const adminApi = (config)=>{\n\n\tconst {routes} = config;\n\tlet wp_rest_nonce = config.wp_rest_nonce;\n\tconst pApi = publicApi(config);\n\n\t/**\n\t * post request to backend and save new nonce of response\n\t * @param {string} route\n\t * @param {object} data\n\t * @param {string} method\n\t * @return {Promise<any | void>}\n\t */\n\tconst requestWithNonce = (route, data, method)=> fetch(route,{\n\t\t\tmethod,\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t'X-WP-Nonce': wp_rest_nonce,\n\t\t\t},\n\t\t\tcredentials: 'include',\n\t\t\tbody: JSON.stringify(data),\n\t\t})\n\t\t\t.then(res => res.json())\n\t\t\t.then(resolveNonce)\n\t\t\t.catch(console.error);\n\n\tconst postWithNonce = (route, data) => requestWithNonce(route, data, \"POST\");\n\tconst deleteWithNonce = (route, data) => requestWithNonce(route, data, \"DELETE\");\n\n\n\tconst resolveNonce = (json) => {\n\t\twp_rest_nonce = json.wp_rest_nonce;\n\t\treturn json;\n\t};\n\n\tconst attachmentCache = {};\n\n\treturn {\n\t\t...pApi,\n\t\tupdateParticle: (particle)=>{\n\t\t\t// TODO: sanitize particle data\n\t\t\treturn postWithNonce(routes.updateParticle, particle).then(json=>json.particle);\n\t\t},\n\t\tdeleteParticle: (particle_id)=>{\n\t\t\treturn deleteWithNonce(routes.deleteParticle, {particle_id});\n\t\t},\n\t\tfetchAttachment: (attachment_id)=>{\n\t\t\tif(typeof attachmentCache[attachment_id] === typeof {}){\n\t\t\t\treturn new Promise((resolve)=>{\n\t\t\t\t\tresolve(attachmentCache[attachment_id]);\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn fetch(`/wp-json/wp/v2/media/${attachment_id}`)\n\t\t\t\t.then(res=>res.json())\n\t\t\t\t.then((attachment)=>{\n\t\t\t\tattachmentCache[attachment.id] = attachment;\n\t\t\t\treturn attachment;\n\t\t\t}).catch(()=>{\n\t\t\t\tattachmentCache[attachment_id] = {error:true};\n\t\t\t})\n\t\t},\n\t\tuploadAttachment: (form, onRightBeforeUpload = null) => {\n\t\t\treturn new Promise((resolve, reject)=>{\n\t\t\t\t// TODO: catch errors\n\t\t\t\t// use fetch api?\n\t\t\t\tconst formData = new FormData(form);\n\t\t\t\tif(onRightBeforeUpload) onRightBeforeUpload();\n\t\t\t\t$.ajax({\n\t\t\t\t\turl: routes.upload,\n\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\tcache       : false,\n\t\t\t\t\tcontentType : false,\n\t\t\t\t\tprocessData : false,\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t// 'Content-Type': 'application/json',\n\t\t\t\t\t\t'X-WP-Nonce': wp_rest_nonce,\n\t\t\t\t\t},\n\t\t\t\t\tdata: formData,\n\t\t\t\t\tsuccess: (json)=>{\n\t\t\t\t\t\tresolve(resolveNonce(json));\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t});\n\n\t\t},\n\t}\n};\n\nexport class AdminApi extends PublicApi{\n\tconstructor(config){\n\t\tsuper(config);\n\t\tthis.adminApi = adminApi(config);\n\t}\n\tupdateParticle(particle){\n\t\treturn this.adminApi.updateParticle(particle);\n\t}\n}","\nexport const contentTypeViewProvider = ()=>{\n\n\t/**\n\t *\n\t * @type {ContentType[]}\n\t */\n\tconst contentTypes = [];\n\n\t// add a new content type to editor\n\tconst addContentType = (_type, cls) =>{\n\t\tif(contentTypes.find(({slug})=> slug === _type)){\n\t\t\tconsole.error(`content type already exists ${_type}`);\n\t\t\treturn false;\n\t\t}\n\t\tcontentTypes.push({\n\t\t\ttype: _type,\n\t\t\tcls,\n\t\t});\n\t\treturn true;\n\t};\n\n\t/**\n\t *\n\t * @param _type\n\t * @return {boolean|ContentType}\n\t */\n\tconst getContentView = (_type)=>{\n\t\tconst found = contentTypes.find(({type})=> type === _type);\n\t\tif(!found){\n\t\t\tconsole.log(`cannot find content view of type ${_type}`);\n\t\t\treturn false;\n\t\t}\n\t\treturn new found.cls($);\n\t};\n\n\treturn {\n\t\tadd: addContentType,\n\t\tget: getContentView,\n\t}\n};","\nexport const particlePreview = (particle, onEdit, onCancelEdit, onDelete)=>{\n\n\tconst {id, created_timestamp, author, author_id, tags} = particle;\n\tconst created = new Date(parseInt(created_timestamp)*1000);\n\n\tconst $header = $(`<div class=\"live-news-particle__header\">\n\n        <div class=\"live-news-particle__meta\">\n                <span class=\"live-news-particle__date\">${created.toLocaleDateString()} ${created.toLocaleTimeString()}</span>\n                <span class=\"live-news-particle__tags\">${tags.join(\", \")}</span>\n        </div>\n\n        <div class=\"live-news-particle__author\">\n            <div class=\"live-news-particle__name\">${(author)? author: author_id}</div>\n        </div>\n\n    </div>`);\n\n\tconst $content = $(\"<div/>\").addClass(\"live-news-particle__content\");\n\t$content.append((particle.contentViews.map((view)=>view.preview$())));\n\n\tconst $footer = $(`<nav class=\"live-news-particle__options\">\n            <ul>\n                <li>\n                    <a data-action=\"edit\" href=\"#\">Bearbeiten</a>\n                </li>\n                <li>\n                    <a data-action=\"delete\" href=\"#\">Löschen</a>\n                </li>\n            </ul>\n       </nav>`);\n\t$footer.on(\"click\", \"[data-action=delete]\", (e)=>{\n\t\te.preventDefault();\n\t\tsetLoading(true);\n\t\tonDelete(particle);\n\t});\n\t$footer.on(\"click\", \"[data-action=edit]\", (e)=>{\n\t\te.preventDefault();\n\t\tconst isEditing = $preview.hasClass(\"is-editing\");\n\t\tif(isEditing){\n\t\t\tonCancelEdit(particle);\n\t\t} else {\n\t\t\tsyncContentWithViews();\n\t\t\tonEdit(particle);\n\n\t\t}\n\t\tsetEditing(!isEditing);\n\t});\n\n\tconst syncContentWithViews = ()=>{\n\t\tfor(let i in particle.contentViews){\n\t\t\tif(!particle.contentViews.hasOwnProperty(i)) continue;\n\t\t\tparticle.contentViews[i].setValue(particle.contents[i].content);\n\t\t}\n\t};\n\tsyncContentWithViews();\n\n\tconst $preview = $(\"<div></div>\").addClass(\"live-news-particle\");\n\t$preview.append($header);\n\t$preview.append($content);\n\t$preview.append($footer);\n\n\t// loading layer\n\tconst $loading = $(\"<div></div>\").addClass(\"live-news-particle__loading\").appendTo($preview);\n\tconst $spinner = $(\"<span></span>\").addClass(\"spinner\").appendTo($loading);\n\n\tconst setLoading = (isLoading)=>{\n\t\tif(isLoading){\n\t\t\t$preview.addClass(\"is-loading\");\n\t\t\t$spinner.addClass(\"is-active\");\n\t\t} else {\n\t\t\t$preview.removeClass(\"is-loading\");\n\t\t\t$spinner.removeClass(\"is-active\");\n\t\t}\n\t};\n\tconst setEditing = (isEditing)=>{\n\t\tif(isEditing){\n\t\t\t$preview.addClass(\"is-editing\");\n\t\t\t$footer.find(\"[data-action=edit]\").text(\"Abbrechen\");\n\t\t} else {\n\t\t\t$preview.removeClass(\"is-editing\");\n\t\t\t$footer.find(\"[data-action=edit]\").text(\"Bearbeiten\");\n\t\t}\n\t};\n\n\treturn {\n\t\tget$: ()=> $preview,\n\t\tparticle,\n\t\tsetLoading,\n\t\tsetEditing,\n\t}\n};","\n// ----------------------\n// basics\n// ----------------------\nconst _events = {};\n\nexport const listen = (on,fn)=>{\n    if(typeof _events[on] === typeof undefined){\n        _events[on] = [];\n    }\n    _events[on].push(fn);\n\n    // off function\n    return ()=>{\n        _events[on] = _events[on].filter((_fn)=> _fn !== fn);\n    };\n};\n\nexport const trigger = (on, payload)=>{\n    if(typeof _events[on] !== typeof []) return;\n    _events[on].forEach((fn)=>{\n        fn(payload);\n    });\n};\n\nexport const onAddParticle = (fn)=> listen(\"particleAdd\", fn);\nexport const triggerAddParticle = ($particle)=> trigger(\"particleAdd\", $particle);\n\nexport const onUpdateParticle = (fn)=> listen(\"particleUpdate\", fn);\nexport const triggerUpdateParticle = ($particle)=> trigger(\"particleUpdate\", $particle);\n\nexport const onRemoveParticle = (fn)=> listen(\"particleRemove\", fn);\nexport const triggerRemoveParticle = ($particle)=> trigger(\"particleRemove\", $particle);\n\n// ----------------------\n// for public free usage\n// ----------------------\nexport default {\n    listen,\n    trigger,\n\n    onAddParticle,\n    triggerAddParticle,\n\n    onUpdateParticle,\n    triggerUpdateParticle,\n\n    onRemoveParticle,\n    triggerRemoveParticle,\n}","/**\n *\n * @param {object} config\n * @param {AdminApi} adminApi\n * @param {jQuery} $\n */\nimport {contentTypeViewProvider} from './utils/content-type-view-provider';\nimport {particleStreamPreview} from './view/particle-stream-preview';\nimport {particleEditor} from './view/particle-editor';\nimport events from './utils/events';\n\nexport const application = (config, adminApi, $)=>{\n\n    let isSavingParticle =  false;\n\tlet fetchingParticles = false;\n\n\t/**\n\t * @type {object}\n\t */\n\tconst dom = {};\n\n\t/**\n\t *\n\t * @type {{add, get}}\n\t */\n\tconst contentTypeProvider = contentTypeViewProvider();\n\n\t// ------------------------------------------------------\n\t// get root dom element of editor\n\t// ------------------------------------------------------\n\tdom.$root = $(`#${config.dom.rootId}`);\n\tdom.$root.empty();\n\n\t// ------------------------------------------------------\n\t// editor\n\t// ------------------------------------------------------\n\tconst editor = particleEditor(\n\t\t$,\n\t\tconfig.tags,\n\t\tcontentTypeProvider,\n\t\t()=>{\n\t\t\tif(isSavingParticle) return;\n\t\t\tisSavingParticle = true;\n\t\t\teditor.setIsSaving(true);\n\n\t\t\tconst values = editor.getContents();\n\t\t\tconst data = {\n\t\t\t\tparticle_contents: values.map(({content}) => content),\n\t\t\t\tparticle_content_types: values.map(({type}) => type),\n\t\t\t\ttags: editor.getTags(),\n\t\t\t};\n\t\t\tif(editor.getId()) data.particle_id = editor.getId();\n\t\t\tif(editor.getAuthorId()) data.author_id = editor.getAuthorId();\n\n\n\t\t\tadminApi.updateParticle(data).then(()=>{\n\t\t\t\tif(data.particle_id>0){\n\t\t\t\t\tpreview.setEditing(data.particle_id, false);\n\t\t\t\t\tpreview.setLoading(data.particle_id, true);\n\t\t\t\t} else {\n\t\t\t\t\tsetPreviewLoading(true);\n\t\t\t\t}\n\t\t\t\teditor.setIsSaving(false);\n\t\t\t\teditor.reset();\n\t\t\t\tisSavingParticle = false;\n\t\t\t\tupdatePreviewStream();\n\t\t\t});\n\t\t},\n\t\t()=>{\n\t\t\t// if editor contents are deleted\n\t\t},\n\t\t()=>{\n\t\t\t// if editing a particle is canceled\n\t\t\tpreview.setEditing(editor.getId(), false);\n\t\t\teditor.reset();\n\t\t}\n\t);\n\tdom.$root.append(editor.get$());\n\n\t// ------------------------------------------------------\n\t// settings for preview stream\n\t// ------------------------------------------------------\n\tconst settings = `<div class=\"live-news-stream__settings\">\n            <ul>\n                <li>\n                    <a href=\"#\" class=\"live-news-stream__settings--is-active\">Neueste zuerst</a>\n                </li>\n                <li>\n                    <a href=\"#\">Älteste zuerst</a>\n                </li>\n                <li>\n                    <a href=\"#\">Nur Wichtigste</a>\n                </li>\n            </ul>\n        </div>`;\n\n\t// ------------------------------------------------------\n\t// preview of particle stream\n\t// ------------------------------------------------------\n\tdom.$preview = $(\"<div></div>\").addClass(\"live-news__preview\").appendTo(dom.$root);\n\tdom.$previewHeader = $(\"<div></div>\").addClass(\"live-news__preview--header\").appendTo(dom.$preview);\n\n\tdom.$previewLoadingIndicator = $(\"<span class='spinner'></span>\")\n\t\t.appendTo(dom.$previewHeader);\n\n\tconst preview = particleStreamPreview(\n\t\t$,\n\t\tcontentTypeProvider,\n\t\t(particle)=>{\n\t\t\t// so all others can be unset for editing\n\t\t\tpreview.setEditing(particle.id, true);\n\t\t\teditor.setParticle(particle);\n\t\t},\n\t\t(particle)=>{\n\t\t\teditor.reset();\n\t\t},\n\t\t(particle)=>{\n\t\t\tadminApi.deleteParticle(particle.id).then((json)=>{\n\t\t\t\tif(json.deleted){\n\t\t\t\t\tpreview.removeParticleById(particle.id);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t);\n\tdom.$preview.append(preview.get$());\n\tconst setPreviewLoading = (isLoading) => {\n\t\tif(isLoading){\n\t\t\tdom.$previewLoadingIndicator.addClass(\"is-active\");\n\t\t} else{\n\t\t\tdom.$previewLoadingIndicator.removeClass(\"is-active\");\n\t\t}\n\t};\n\tlet updateTimeout = null;\n\tconst updatePreviewStream = ()=>{\n\t\tif(fetchingParticles) return;\n\n\t\tclearTimeout(updateTimeout);\n\t\tfetchingParticles = true;\n\n\t\tadminApi.fetchParticlesUpdate().then((particles)=>{\n\n\t\t\tupdateTimeout = setTimeout(updatePreviewStream, 5000);\n\t\t\tfetchingParticles = false;\n\t\t\tsetPreviewLoading(false);\n\t\t\tpreview.update(particles);\n\t\t});\n\t};\n\tsetPreviewLoading(true);\n\tupdatePreviewStream();\n\n\t// ------------------------------------------------------\n\t// functions\n\t// ------------------------------------------------------\n\n\t// ------------------------------------------------------\n\t// public\n\t// ------------------------------------------------------\n\treturn {\n\t\tdom,\n\t\tcontentTypeProvider,\n\t\teditor,\n\t\tevents,\n\t\tinit: () => {\n\t\t\t// initially add this combination\n\t\t\teditor.setContents([\"title\", \"html\", \"upload\"]);\n\t\t}\n\t}\n};","\nexport const particleEditor = ($, tags, contentTypeViewProvider, onSubmit, onReset, onCancel) => {\n\n\t/**\n\t * particle id if edit or null if create\n\t * @type {null|int}\n\t */\n\tlet particleId = null;\n\tlet authorId = null;\n\n\t/**\n\t *\n\t * @type {ContentType[]}\n\t */\n\tlet contents = [];\n\n\t// dom element\n\tconst $editor = $(\"<div></div>\").addClass(\"live-news-editor\");\n\n\t// ------------------------------------------------------\n\t// editor form\n\t// ------------------------------------------------------\n\tconst $form = $(\"<div></div>\").addClass(\"live-news-input\");\n\t$editor.append($form);\n\tconst $contentViewElements = $(\"<div></div>\").addClass(\"live-news__items\");\n\t$form.append($contentViewElements);\n\n\t// ------------------------------------------------------\n\t// tags\n\t// ------------------------------------------------------\n\tconst $tags = $(\"<div><h4>Eigenschaften wählen</h4></div>\").addClass(\"live-news-input__tags\").appendTo($form);\n\tconst $tagList = $(\"<div></div>\").addClass(\"live-news-input__tags--list\").appendTo($tags);\n\tconst renderTag = (tag)=>{\n\t\treturn $(`<label><input type='checkbox' value=\"${tag}\" />  ${tag}</label>`).addClass(\"live-news-input__tags--tag\")\n\t};\n\tconst renderTags = (tags)=>{\n\t\t$tagList.empty().append(tags.map(renderTag));\n\t};\n\trenderTags(tags);\n\n\n\t// ------------------------------------------------------\n\t// submit\n\t// ------------------------------------------------------\n\tconst $submit = $(`<button>Nachricht speichern</button>`)\n\t\t.attr(\"type\",\"submit\")\n\t\t.addClass(\"live-news-input__submit\")\n\t\t.on(\"click\", (e)=>{\n\t\t\te.preventDefault();\n\t\t\tonSubmit();\n\t\t})\n\t\t.appendTo($form);\n\n\t// ------------------------------------------------------\n\t// reset\n\t// ------------------------------------------------------\n\tconst $reset = $(`<button>Zurücksetzten</button>`)\n\t\t.attr(\"type\",\"submit\")\n\t\t.addClass(\"live-news-input__reset\")\n\t\t.on(\"click\", (e)=>{\n\t\t\te.preventDefault();\n\t\t\tonReset();\n\t\t\treset();\n\t\t})\n\t\t.appendTo($form);\n\n\t// ------------------------------------------------------\n\t// reset\n\t// ------------------------------------------------------\n\tconst $cancel = $(`<button>Abbrechen</button>`)\n\t\t.attr(\"type\",\"submit\")\n\t\t.addClass(\"live-news-input__cancel\")\n\t\t.on(\"click\", (e)=>{\n\t\t\te.preventDefault();\n\t\t\tonCancel();\n\t\t})\n\t\t.hide()\n\t\t.appendTo($form);\n\n\n\t// ------------------------------------------------------\n\t// loading state\n\t// ------------------------------------------------------\n\tconst $loading = $(\"<span class='spinner'></span>\").insertAfter($submit);\n\tconst setIsSaving = (isSaving)=>{\n\t\tif(isSaving){\n\t\t\t$form.addClass(\"is-saving\");\n\t\t\t$submit.attr(\"disabled\", \"disabled\");\n\t\t\t$reset.attr(\"disabled\", \"disabled\");\n\t\t\t$cancel.attr(\"disabled\", \"disabled\");\n\t\t\t$loading.addClass(\"is-active\");\n\t\t\tgetTagInputs$().attr(\"disabled\", \"disabled\");\n\t\t} else {\n\t\t\t$form.removeClass(\"is-saving\");\n\t\t\t$loading.removeClass(\"is-active\");\n\t\t\t$submit.removeAttr(\"disabled\");\n\t\t\t$reset.removeAttr(\"disabled\");\n\t\t\t$cancel.removeAttr(\"disabled\");\n\t\t\tgetTagInputs$().removeAttr(\"disabled\");\n\t\t}\n\t\tfor(let c of contents){\n\t\t\tc.setDisabled(isSaving);\n\t\t}\n\t};\n\n\n\t// ------------------------------------------------------\n\t// functions\n\t// ------------------------------------------------------\n\n\t// get contents of inputs as json object\n\tconst getContents = ()=>{\n\t\treturn contents.map((content)=>{\n\t\t\treturn {\n\t\t\t\ttype: content.slug,\n\t\t\t\tcontent: content.getValue(),\n\t\t\t}\n\t\t});\n\t};\n\t// add content to editor\n\tconst addContent = (_type_string_or_content_view)=>{\n\t\tif( typeof _type_string_or_content_view === typeof \"\"){\n\t\t\tconst content = contentTypeViewProvider.get(_type_string_or_content_view);\n\t\t\tif(!content) return;\n\t\t\t$contentViewElements.append(content.editor$());\n\t\t\tcontents.push(content);\n\t\t} else {\n\t\t\t$contentViewElements.append(_type_string_or_content_view.editor$());\n\t\t\tcontents.push(_type_string_or_content_view);\n\t\t}\n\t};\n\t// set list of contents\n\tconst setContents = (contents)=>{\n\t\tclearContentViews();\n\t\tfor(let content of contents){\n\t\t\taddContent(content);\n\t\t}\n\t};\n\n\tconst getTagInputs$ = () => {\n\t\treturn $tags.find(\"[type=checkbox]\");\n\t};\n\n\tconst getTags = ()=>{\n\t\treturn getTagInputs$().map((index,input)=>{\n\t\t\treturn ($(input).prop(\"checked\"))? input.value: false;\n\t\t}).toArray().filter(v=>v !== false);\n\t};\n\n\tconst setTags = (tags)=>{\n\t\tgetTagInputs$().map((index,input)=>{\n\t\t\tif(tags.includes(input.value)){\n\t\t\t\t$(input).prop(\"checked\", true);\n\t\t\t} else {\n\t\t\t\t$(input).prop(\"checked\", false);\n\t\t\t}\n\t\t})\n\t};\n\n\t// set particle to edit\n\tconst setParticle = ({id, author_id, tags, contentViews}) => {\n\t\tparticleId = id;\n\t\tauthorId = author_id;\n\t\tsetTags(tags);\n\t\tsetContents(contentViews);\n\t\t$cancel.show();\n\t\t$reset.hide();\n\t};\n\n\tconst reset = ()=>{\n\t\tparticleId = null;\n\t\tauthorId = null;\n\t\tfor( let c of contents){\n\t\t\tc.setValue(\"\");\n\t\t}\n\t\t$tags.find(\"input\").prop(\"checked\", false);\n\t\t$cancel.hide();\n\t\t$reset.show();\n\t};\n\n\tconst clearContentViews = ()=>{\n\t\t$contentViewElements.empty();\n\t\tcontents = [];\n\t};\n\n\n\treturn {\n\t\tget$: ()=> $editor,\n\n\t\taddContent,\n\t\tsetParticle,\n\n\t\tgetId: ()=> particleId,\n\t\tgetAuthorId: ()=> authorId,\n\n\t\tgetContents,\n\t\tsetContents,\n\n\t\tgetTags,\n\t\tsetTags,\n\n\t\treset,\n\n\t\tclearContentViews,\n\t\tsetIsSaving,\n\t}\n};","import {particlePreview} from './particle';\n\nexport const particleStreamPreview = ($, contentTypeProvider, onEdit, onCancelEdit, onDelete)=>{\n\n\tlet streamParticlesViews = [];\n\n\tconst $el = $(\"<div></div>\").addClass(\"live-news__stream\");\n\n\t// check if is in preview stream\n\t// return position of view in array or -1\n\tconst isInPreviewStream = (particle_id) => streamParticlesViews.findIndex(({particle})=> particle.id === particle_id);\n\n\t// get particle view from stream\n\tconst getPreviewStreamParticleView = (particle_id)=>{\n\t\treturn streamParticlesViews.find(({particle}) => particle.id === particle_id);\n\t};\n\n\t// particle view for preview stream\n\tconst buildPreviewStreamParticleView = (particle) => {\n\t\tparticle.contentViews = particle.contents.map(({type, content}) => {\n\t\t\tconst contentView = contentTypeProvider.get(type);\n\t\t\tif(!contentView) return null;\n\t\t\tcontentView.setValue(content);\n\t\t\treturn contentView;\n\t\t}).filter(v => v !== null);\n\t\treturn particlePreview(particle, onEdit, onCancelEdit, onDelete);\n\t};\n\n\tconst removeParticleById = (particleId)=>{\n\t\tconst view = getPreviewStreamParticleView(particleId);\n\t\tif(view){\n\t\t\tstreamParticlesViews = streamParticlesViews.filter(view=> view.particle.id !== particleId);\n\t\t\tview.get$().slideUp(330, ()=>{\n\t\t\t\tview.get$().remove();\n\t\t\t});\n\t\t}\n\t};\n\tconst resetEditing = ()=>{\n\t\tfor(let v of streamParticlesViews){\n\t\t\tv.setEditing(false);\n\t\t}\n\t}\n\n\treturn {\n\t\tget$: ()=> $el,\n\t\tsetEditing: (particle_id, isEditing)=>{\n\t\t\tconst p = getPreviewStreamParticleView(particle_id);\n\t\t\tresetEditing();\n\t\t\tif(p) p.setEditing(isEditing);\n\t\t},\n\t\tsetLoading: (particle_id, isLoading)=>{\n\t\t\tconst p = getPreviewStreamParticleView(particle_id);\n\t\t\tif(p) p.setLoading(isLoading);\n\t\t},\n\t\tremoveParticleById,\n\t\tupdate: (particles) => {\n\t\t\tfor(let p of particles.reverse()){\n\t\t\t\tconst inStream = isInPreviewStream(p.id);\n\n\t\t\t\tif(p.is_deleted === true){\n\t\t\t\t\tif(inStream){\n\t\t\t\t\t\t// DELETE\n\t\t\t\t\t\tremoveParticleById(p.id);\n\t\t\t\t\t}\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif(inStream >= 0){\n\t\t\t\t\t// UPDATE\n\t\t\t\t\tconst view = getPreviewStreamParticleView(p.id);\n\n\t\t\t\t\tconst indexOfView = inStream;\n\t\t\t\t\tconst newView = buildPreviewStreamParticleView(p);\n\t\t\t\t\tview.get$().after(newView.get$());\n\t\t\t\t\tview.get$().remove();\n\t\t\t\t\tstreamParticlesViews[indexOfView] = newView;\n\n\n\n\t\t\t\t} else {\n\t\t\t\t\t// add\n\t\t\t\t\tconst view = buildPreviewStreamParticleView(p);\n\t\t\t\t\tstreamParticlesViews.push(view);\n\t\t\t\t\t$el.prepend(view.get$());\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};","import {svgDown, svgMove, svgUp} from './icons';\n\nexport class ContentType{\n\n\tconstructor(){\n\t\tthis.$editor = $(\"<div></div>\").addClass(\"particle-content-type live-news-editor__item\");\n\t\tthis.$preview = $(\"<div></div>\").addClass(\"particle-content-type--preview\");\n\t}\n\n\teditor$(){\n\n\t\tif(!this.$editor.empty()) return this.$editor;\n\n\t\tthis.$toolbar = $(`\n                <div class=\"live-news-editor__toolbar\">\n                    <div class=\"live-news-editor__mover\">\n                        <button class=\"live-news-editor__up\">\n\n                            ${svgUp}\n                        </button>\n                        <span class=\"live-news-editor__handle\">\n                            ${svgMove}\n                        </span>\n                        <button class=\"live-news-editor__down\">\n                            ${svgDown}\n                        </button>\n                    </div>\n\n                </div>`);\n\t\tthis.$editor.append(this.$toolbar);\n\n\t\treturn this.$editor;\n\t}\n\n\tpreview$(){\n\t\treturn $(\"<p/>\").text(this.getValue());\n\t}\n\n\tsetValue(value){}\n\n\tgetValue(){\t}\n\n\tsetDisabled(isDisabled){\n\n\t}\n}\n\nContentType.prototype.slug = \"\";","\n\nexport const svgUp = `<svg width=\"18\" height=\"18\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18 18\"\n                                 role=\"img\" aria-hidden=\"true\" focusable=\"false\">\n                                <polygon points=\"9,4.5 3.3,10.1 4.8,11.5 9,7.3 13.2,11.5 14.7,10.1 \"></polygon>\n                            </svg>`;\n\nexport const svgDown = `<svg width=\"18\" height=\"18\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18 18\"\n                                 role=\"img\" aria-hidden=\"true\" focusable=\"false\">\n                                <polygon points=\"9,13.5 14.7,7.9 13.2,6.5 9,10.7 4.8,6.5 3.3,7.9 \"></polygon>\n                            </svg>`;\n\nexport const svgMove = `<svg width=\"18\" height=\"18\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18 18\" role=\"img\"\n                             aria-hidden=\"true\" focusable=\"false\"><path\n                                    d=\"M13,8c0.6,0,1-0.4,1-1s-0.4-1-1-1s-1,0.4-1,1S12.4,8,13,8z M5,6C4.4,6,4,6.4,4,7s0.4,1,1,1s1-0.4,1-1S5.6,6,5,6z M5,10 c-0.6,0-1,0.4-1,1s0.4,1,1,1s1-0.4,1-1S5.6,10,5,10z M13,10c-0.6,0-1,0.4-1,1s0.4,1,1,1s1-0.4,1-1S13.6,10,13,10z M9,6 C8.4,6,8,6.4,8,7s0.4,1,1,1s1-0.4,1-1S9.6,6,9,6z M9,10c-0.6,0-1,0.4-1,1s0.4,1,1,1s1-0.4,1-1S9.6,10,9,10z\"></path></svg>`;","import \"trumbowyg\";\nimport \"trumbowyg/plugins/emoji/trumbowyg.emoji\";\nimport \"trumbowyg/plugins/history/trumbowyg.history\";\nimport \"trumbowyg/plugins/cleanpaste/trumbowyg.cleanpaste\";\nimport \"trumbowyg/plugins/allowtagsfrompaste/trumbowyg.allowtagsfrompaste\";\nimport \"trumbowyg/plugins/colors/trumbowyg.colors\";\n\nimport {ContentType} from './content-type';\n\nexport class ContentType_HTML extends ContentType {\n\n    constructor($) {\n        super($);\n        this._tmp_val = \"\";\n    }\n\n    editor$() {\n        if (!this.$editor.empty()) return this.$editor;\n\n        this.$textarea = $(\"<textarea/>\").addClass(\"live-news-input__textarea\");\n        this.$editor.append(this.$textarea);\n        this.$textarea.trumbowyg(LiveNews.contentTypes.html);\n        if (this._tmp_val) {\n            this.setValue(this._tmp_val);\n        }\n\n        return this.$editor;\n    }\n\n    preview$() {\n        return $(\"<div></div>\").html(this.getValue());\n    }\n\n    getValue() {\n        return (this.$textarea) ? this.$textarea.trumbowyg('html') : this._tmp_val;\n    }\n\n    setValue(value) {\n        if (this.$textarea) {\n            this.$textarea.trumbowyg('html', value);\n        } else {\n            this._tmp_val = value;\n        }\n    }\n\n    setDisabled(isDisabled) {\n        if (isDisabled) {\n            this.$textarea.trumbowyg(\"disable\");\n        } else {\n            this.$textarea.trumbowyg(\"enable\");\n        }\n    }\n\n}\n\nContentType_HTML.prototype.slug = \"html\";","import {ContentType} from './content-type';\n\nexport class ContentType_Title extends ContentType{\n\n\tconstructor($){\n\t\tsuper($);\n\t\tthis._tmp_val = \"\";\n\t}\n\n\teditor$() {\n\t\tif(!this.$editor.empty()) return this.$editor;\n\n\t\t// super.editor$();\n\n\t\tconst val = this.getValue();\n\n\t\tthis.$content = $(\"<input />\")\n\t\t\t.addClass(\"live-news-input__input-text\")\n\t\t\t.attr(\"type\", \"text\")\n\t\t\t.attr(\"placeholder\", \"Titel (optional)\")\n\t\t\t.val(val);\n\t\tthis.$editor.append(this.$content);\n\t\treturn this.$editor;\n\t}\n\n\tpreview$() {\n\t\treturn $(\"<h3/>\").text(this.getValue());\n\t}\n\n\tsetValue(val){\n\t\tif(this.$content){\n\t\t\tthis.$content.val(val);\n\t\t}  else {\n\t\t\tthis._tmp_val = val;\n\t\t}\n\t}\n\n\tgetValue() {\n\t\treturn (this.$content)? this.$content.val(): this._tmp_val;\n\t}\n\n\tsetDisabled(isDisabled) {\n\t\tif(isDisabled){\n\t\t\tthis.$content.attr(\"disabled\", \"disabled\");\n\t\t} else {\n\t\t\tthis.$content.removeAttr(\"disabled\");\n\t\t}\n\n\t}\n\n}\n\nContentType_Title.prototype.slug = \"title\";","import {ContentType} from './content-type';\n\nexport class ContentType_Upload extends ContentType{\n\n\tconstructor($){\n\t\tsuper($);\n\t\tthis.val = \"\";\n\t\tthis.fetched_id = null;\n\t}\n\n\teditor$() {\n\t\tif(!this.$editor.empty()) return this.$editor;\n\n\t\tconst $content = $(\"<lable><strong>Bild (optional)</strong><br></lable>\");\n\t\tconst $input = $(\"<input />\")\n\t\t\t.addClass(\"live-news-input__input-file\")\n\t\t\t.attr(\"name\", \"file\")\n\t\t\t.attr(\"type\", \"file\")\n\t\t\t.attr(\"placeholder\", \"Bild (optional)\")\n\t\t\t.attr(\"accept\", \"image/x-png,image/gif,image/jpeg\")\n\t\t\t.appendTo($content);\n\n\t\tthis.$input = $input;\n\n\t\tconst $form = $(\"<form></form>\");\n\t\t$form.append($content);\n\n\t\t$form.on(\"submit\",(e)=>{\n\t\t\te.preventDefault();\n\t\t\tif($input.val() === \"\") return;\n\t\t\tthis.setFetchingImages(true);\n\t\t\tLiveNews.api.uploadAttachment(\n\t\t\t\t$form[0],\n\t\t\t\t()=>{\n\t\t\t\t\tthis.setUploadingImage(true);\n\t\t\t\t}).then((data)=>{\n\t\t\t\tthis.setUploadingImage(false);\n\t\t\t\tthis.setValue(data.attachment_id);\n\t\t\t});\n\t\t});\n\t\t$input.on(\"change\", ()=> $form.submit());\n\n\t\t// build ui\n\t\tthis.$editor.append($form);\n\t\tconst $wrapper = $(\"<div></div>\");\n\n\t\tthis.getEditorImg$().appendTo($wrapper.appendTo($form));\n\n\t\tthis.$delete = $(\"<button>Bild entfernen</button>\");\n\t\tthis.$delete.on(\"click\",(e)=>{\n\t\t\te.preventDefault();\n\t\t\tthis.setValue(\"\");\n\t\t});\n\t\t$wrapper.append(this.$delete);\n\t\tthis.updateDeleteButton();\n\n\t\treturn this.$editor;\n\t}\n\n\tsetFetchingImages(isFetching){\n\t\tthis.setFetchingImage(this.getEditorImg$(), isFetching);\n\t\tthis.setFetchingImage(this.getImg$(), isFetching);\n\t}\n\n\tsetFetchingImage($wrapper, isFetching){\n\t\tif(!$wrapper) return;\n\t\tif(isFetching){\n\t\t\t$wrapper.find(\".spinner\").addClass(\"is-active\");\n\t\t} else {\n\t\t\t$wrapper.find(\".spinner\").removeClass(\"is-active\");\n\t\t}\n\t}\n\tsetUploadingImage(isUploading){\n\t\tthis.setDisabled(isUploading);\n\t}\n\n\trenderImages(attachment){\n\t\tthis.renderImage(this.$img, attachment);\n\t\tthis.renderImage(this.$editorImg, attachment);\n\t}\n\n\trenderImage($imgWrapper, attachment){\n\t\tif(!$imgWrapper) return;\n\t\tif(attachment !== null && typeof attachment === typeof {}){\n\t\t\tif(attachment.media_details){\n\t\t\t\t$imgWrapper.show();\n\t\t\t\t$imgWrapper.find(\"img\").attr(\"src\", attachment.media_details.sizes.medium.source_url);\n\t\t\t} else {\n\t\t\t\t$imgWrapper.replaceWith(\"<p>🖼 Image lost!</p>\");\n\t\t\t}\n\t\t} else {\n\t\t\t$imgWrapper.hide();\n\t\t}\n\t}\n\n\tgetEditorImg$(){\n\t\tif(!this.$editorImg){\n\t\t\tthis.$editorImg = $(\"<div class='particle__content-type--upload'><span class='spinner'></span><img class='particle__img'/></div>\");\n\t\t}\n\t\tthis.fetchAttachment();\n\t\treturn this.$editorImg;\n\t}\n\n\tgetImg$(){\n\t\tif(!this.$img){\n\t\t\tthis.$img = $(\"<div class='particle__content-type--upload'><span class='spinner'></span><img class='particle__img'/></div>\");\n\t\t}\n\t\tthis.fetchAttachment();\n\t\treturn this.$img;\n\t}\n\n\tpreview$() {\n\t\treturn this.getImg$();\n\t}\n\n\tfetchAttachment(){\n\t\tif(\n\t\t\tthis.val === \"\"\n\t\t\t||\n\t\t\tthis.isFetching === true\n\t\t\t||\n\t\t\tthis.fetched_id === this.val\n\t\t) return;\n\n\t\tthis.isFetching = true;\n\t\tthis.setFetchingImages(true);\n\t\tLiveNews.api.fetchAttachment(this.val).then((attachment)=>{\n\t\t\tthis.isFetching = false;\n\t\t\tthis.fetched_id = this.val;\n\t\t\tthis.setFetchingImages(false);\n\t\t\tthis.renderImages(attachment)\n\t\t});\n\t}\n\n\tsetValue(attachment_id){\n\t\tthis.val = attachment_id;\n\t\t// clear file field\n\t\tif(this.$input) this.$input.val(\"\");\n\t\tif(attachment_id === \"\"){\n\t\t\tthis.renderImage(this.$editorImg, null);\n\t\t}\n\t\tthis.updateDeleteButton();\n\t\tthis.fetchAttachment();\n\t}\n\n\tgetValue() {\n\t\treturn this.val;\n\t}\n\n\tupdateDeleteButton(){\n\t\tthis.showDeleteImage(this.getValue() !== \"\");\n\t}\n\n\tshowDeleteImage(show){\n\t\tif(this.$delete){\n\t\t\tif(show) this.$delete.show();\n\t\t\telse if(!show) this.$delete.hide();\n\t\t}\n\t}\n\n\tsetDisabled(isDisabled) {\n\t\tif(isDisabled){\n\t\t\tthis.$input.attr(\"disabled\", \"disabled\");\n\t\t} else {\n\t\t\tthis.$input.removeAttr(\"disabled\");\n\t\t}\n\t}\n\n}\n\nContentType_Upload.prototype.slug = \"upload\";","import {adminApi} from './lib/api';\nimport {application} from './lib/application';\nimport {ContentType_HTML} from './lib/view/content-type--html';\nimport {ContentType_Title} from './lib/view/content-type--title';\nimport {ContentType_Upload} from './lib/view/content-type--upload';\n\n(function(config) {\n\n\twindow.LiveNews = config;\n\n\tconst api = adminApi(config);\n\twindow.LiveNews.api = api;\n\n\t// ugly fix. please give it down as an dependency\n\twindow.$ = jQuery;\n\n\tconst app = application(config, api, jQuery);\n\twindow.LiveNews.app = app;\n\n\tapp.contentTypeProvider.add(ContentType_Title.prototype.slug, ContentType_Title);\n\tapp.contentTypeProvider.add(ContentType_HTML.prototype.slug, ContentType_HTML);\n\tapp.contentTypeProvider.add(ContentType_Upload.prototype.slug, ContentType_Upload);\n\n\tapp.init();\n\n})(LiveNews);\n\n\n\n\n"],"sourceRoot":""}